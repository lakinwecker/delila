{"version":3,"sources":["webpack:///webpack/bootstrap 53ee2ccdaeae901bfdd0","webpack:///./node_modules/kaiju/es/observable/observable.js","webpack:///./node_modules/kaiju/es/main.js","webpack:///./node_modules/chessground/util.js","webpack:///./node_modules/space-lift/es/lift.js","webpack:///./node_modules/immupdate/es/immupdate.js","webpack:///./src/stores/route.ts","webpack:///./node_modules/snabbdom/h.js","webpack:///./node_modules/snabbdom/vnode.js","webpack:///./node_modules/kaiju/es/lib/log.js","webpack:///./node_modules/kaiju/es/observable/index.js","webpack:///./node_modules/chessground/board.js","webpack:///./node_modules/kaiju/es/lib/util.js","webpack:///./node_modules/chessground/types.js","webpack:///./node_modules/chessground/fen.js","webpack:///./node_modules/snabbdom/is.js","webpack:///./node_modules/snabbdom/htmldomapi.js","webpack:///./node_modules/kaiju/es/lib/render.js","webpack:///./node_modules/kaiju/es/lib/messages.js","webpack:///./node_modules/space-lift/es/object/is.js","webpack:///./node_modules/kaiju/es/store/index.js","webpack:///./node_modules/kaiju/es/lib/message.js","webpack:///./src/server/messages.ts","webpack:///./src/server/connection.ts","webpack:///./node_modules/chessground/config.js","webpack:///./node_modules/chessground/anim.js","webpack:///./node_modules/chessground/drag.js","webpack:///./node_modules/chessground/draw.js","webpack:///./node_modules/chessground/svg.js","webpack:///./src/version.ts","webpack:///./src/main.ts","webpack:///./node_modules/snabbdom/snabbdom.js","webpack:///./node_modules/snabbdom/thunk.js","webpack:///./node_modules/snabbdom/tovnode.js","webpack:///./node_modules/kaiju/es/lib/component.js","webpack:///./node_modules/kaiju/es/observable/debounce.js","webpack:///./node_modules/kaiju/es/observable/delay.js","webpack:///./node_modules/kaiju/es/observable/drop.js","webpack:///./node_modules/kaiju/es/observable/filter.js","webpack:///./node_modules/kaiju/es/observable/flatMapLatest.js","webpack:///./node_modules/kaiju/es/observable/fromEvent.js","webpack:///./node_modules/kaiju/es/observable/fromPromise.js","webpack:///./node_modules/space-lift/es/index.js","webpack:///./node_modules/space-lift/node_modules/immupdate/es/immupdate.js","webpack:///./node_modules/space-lift/es/option/index.js","webpack:///./node_modules/space-lift/es/result/index.js","webpack:///./node_modules/space-lift/es/array/range.js","webpack:///./node_modules/space-lift/es/array/fromArrayLike.js","webpack:///./node_modules/space-lift/es/array/tuple.js","webpack:///./node_modules/space-lift/es/object/set.js","webpack:///./node_modules/space-lift/es/function/memoize.js","webpack:///./node_modules/kaiju/es/observable/interval.js","webpack:///./node_modules/kaiju/es/observable/map.js","webpack:///./node_modules/kaiju/es/observable/merge.js","webpack:///./node_modules/kaiju/es/observable/partition.js","webpack:///./node_modules/kaiju/es/observable/pure.js","webpack:///./node_modules/kaiju/es/observable/sliding.js","webpack:///./node_modules/kaiju/es/observable/throttle.js","webpack:///./node_modules/kaiju/es/lib/events.js","webpack:///./node_modules/snabbdom/modules/class.js","webpack:///./node_modules/snabbdom/modules/attributes.js","webpack:///./node_modules/snabbdom/modules/style.js","webpack:///./node_modules/snabbdom/modules/eventlisteners.js","webpack:///./src/app.ts","webpack:///./src/components/dashboard.ts","webpack:///./src/components/importpgn.ts","webpack:///./src/server/importfile.ts","webpack:///./node_modules/path-browserify/index.js","webpack:///./node_modules/process/browser.js","webpack:///./src/components/logo.ts","webpack:///./src/components/reader.ts","webpack:///./src/components/chessground.ts","webpack:///./node_modules/chessground/chessground.js","webpack:///./node_modules/chessground/api.js","webpack:///./node_modules/chessground/premove.js","webpack:///./node_modules/chessground/explosion.js","webpack:///./node_modules/chessground/state.js","webpack:///./node_modules/chessground/wrap.js","webpack:///./node_modules/chessground/events.js","webpack:///./node_modules/chessground/render.js","webpack:///./src/server/component.ts","webpack:///./src/components/splash.ts","webpack:///./src/server/initialization.ts"],"names":["Object","defineProperty","exports","value","kaiju_1","require","immupdate_1","navigate","Message","Route","initialState","route","Splash","default","Store","on","state","update","connection_1","OutgoingMessageInterface","OutgoingMessage","constructor","name","message","listen","remote","v","newState","send","JSON","stringify","IncomingMessageInterface","IncomingMessage","register","id","connection","store","jsonString","parse","Remote","outgoing","incoming","Connection","getInstance","uniqueId","forEach","unsentMessages","callbacks","_instance","idSequence","connect","url","ws","WebSocket","onopen","sendUnsentMessages","onclose","onmessage","event","data","key","callback","args","msg","methodName","push","undefined","VERSION","class_1","attributes_1","style_1","eventlisteners_1","app_1","run","element","startApp","app","snabbdomModules","elm","replaceElm","document","getElementById","console","error","route_1","route_2","dashboard_1","importpgn_1","logo_1","reader_1","component_1","splash_1","default_1","Component","initState","render","h","Dashboard","Reader","showReader","click","importfile_1","path","props","defaultProps","remoteStore","factory","showingSelectFileDialog","targetDatabase","showFileImportProgress","remoteState","activity","progress","showModal","hideFileDialog","setFileInput","showFileDialog","selectFile","importPgn","cancelFileImport","importFile","fileInput","files","file","fileDialogClass","progressDialogClass","buttonTitle","basename","attrs","change","evt","target","hook","insert","vnode","messages_1","updateProgress","button","chessground_1","log","events","chessground","inserted","destroyed","Chessground","node","destroy","observable_1","Connected","type","Retrying","WaitingToRetry","initProps","timeout","timeToRetry","disconnected","connected","tryReconnect","polling","Observable","interval","Math","min","initialization_1","version_1","initialize","version","finished"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;AC3DA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,iBAAiB,sBAAsB;AACvC;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA,iBAAiB,wBAAwB;AACzC;AACA;AACA;;AAEA;AACA,e;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtEe;AACf;AACA;;AAE+C;AAC/C;AACA;AACuB;AACF;AACL;AAChB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;ACtBA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA,qFAAqF,mCAAmC,cAAc,EAAE,EAAE,EAAE;AAC5I,kCAAkC,iDAAiD;AACnF,gCAAgC,qDAAqD;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,eAAe;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,sBAAsB,EAAE;AACpD,6BAA6B,qBAAqB,EAAE;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,0CAA0C;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,4DAA4D;AACpG,oEAAoE;AACpE;AACA;AACA,EAAE;AACF;AACA;AACA,oCAAoC,2DAA2D;AAC/F;AACA,qDAAqD,qDAAqD;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,mDAAmD;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,0CAA0C;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC7EA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;yDACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,oBAAoB;AAC/D;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AChCA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,8CAA8C;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,yDAAyD;AACtF;AACA;AACA,6BAA6B,yDAAyD;AACtF;AACA;AACA,iDAAiD,4BAA4B,EAAE;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,wBAAwB,EAAE;AACvE;AACA;AACA;AACA,yBAAyB,oCAAoC;AAC7D;;;;;;;;AC7IA;;AACAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA,MAAMC,UAAU,mBAAAC,CAAQ,CAAR,CAAhB;AACA,MAAMC,cAAc,mBAAAD,CAAQ,CAAR,CAApB;AACA;AACAH,QAAQK,QAAR,GAAmBH,QAAQI,OAAR,CAAgB,UAAhB,CAAnB;AACA;AACA,IAAIC,KAAJ;AACA,CAAC,UAAUA,KAAV,EAAiB;AACdA,UAAMA,MAAM,QAAN,IAAkB,CAAxB,IAA6B,QAA7B;AACAA,UAAMA,MAAM,QAAN,IAAkB,CAAxB,IAA6B,QAA7B;AACAA,UAAMA,MAAM,WAAN,IAAqB,CAA3B,IAAgC,WAAhC;AACH,CAJD,EAIGA,QAAQP,QAAQO,KAAR,KAAkBP,QAAQO,KAAR,GAAgB,EAAlC,CAJX;AAKA;AACA,MAAMC,eAAe,EAAEC,OAAOF,MAAMG,MAAf,EAArB;AACA;AACAV,QAAQW,OAAR,GAAkBT,QAAQU,KAAR,CAAcJ,YAAd,EAA4BK,MAAM;AAChDA,OAAGb,QAAQK,QAAX,EAAqB,CAACS,KAAD,EAAQL,KAAR,KAAkBL,YAAYW,MAAZ,CAAmBD,KAAnB,EAA0B,EAAEL,OAAOA,KAAT,EAA1B,CAAvC;AACH,CAFiB,CAAlB,C;;;;;;;AChBA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6B;;;;;;;AC1DA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,iC;;;;;;;;;;ACPA;AACA;AACA;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;;;;;ACT4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC6B;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACrDA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA,gCAAgC,8BAA8B,EAAE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACvVA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,iBAAiB,kBAAkB;AACnC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,C;;;;;;;ACnCA;AACA,8CAA8C,cAAc;AAC5D;AACA;;;;;;;;ACHA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA,aAAa;AACb,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,mBAAmB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,WAAW,EAAE,uBAAuB,GAAG,kBAAkB,4BAA4B,EAAE;AAC5F;AACA;;;;;;;;ACvDA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA,8B;;;;;;;ACPA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sC;;;;;;;;;;;;;;;;;;;;ACjEA;AACyB;AACA;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,yBAAyB,oDAAoD;;AAE7E;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,mFAA2B,mGAA2C;;AAEtE;AACA;AACA;AACA;AACA;AACA,uFAA+B,2GAAmD;AAClF,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;;AAEA;AACA,8EAAsB;AACtB,E;;;;;;;;;;AChQqB;;AAErB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA,C;;;;;;;;;;;;;AC7DA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtBqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA,gBAAgB,qDAAqD;;AAErE;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA,kB;;;;;;;;;AC/IA;;AAEA;AACA;AACA;;AAEA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,yC;;;;;;;AC1CA;;AACAX,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,UAAU,mBAAAC,CAAQ,CAAR,CAAhB;AACA,MAAMC,cAAc,mBAAAD,CAAQ,CAAR,CAApB;AACA,MAAMa,eAAe,mBAAAb,CAAQ,EAAR,CAArB;AACA;AACA;AACA,MAAMc,wBAAN,CAA+B;AAE/BjB,QAAQiB,wBAAR,GAAmCA,wBAAnC;AACA,MAAMC,eAAN,SAA8BD,wBAA9B,CAAuD;AACnDE,gBAAYC,IAAZ,E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;;;;;;;;AC9CA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,kBAAkB,gCAAgC;AAClD;AACA;AACA;AACA;AACA,uCAAuC,gBAAgB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,4CAA4C,EAAE;AACxG;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,kBAAkB;AACnD;AACA,SAAS;AACT;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AChIA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,wCAAwC,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kCAAkC,EAAE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACrOA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,cAAc;AACvC;AACA;AACA;AACA,mCAAmC,mCAAmC;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC9GA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,6CAA6C,gBAAgB,EAAE;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD,kCAAkC,8BAA8B,EAAE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,6BAA6B,EAAE;AACnE;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAU,EAAE;AACvC;AACA;AACA,uEAAuE,UAAU,EAAE;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,UAAU,EAAE;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClMA;;AACA1C,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA;AACA;AACA,MAAMgE,UAAU,OAAhB;AACAjE,QAAQW,OAAR,GAAkBsD,OAAlB,C;;;;;;;ACLA;;AACAnE,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA,MAAMC,UAAU,mBAAAC,CAAQ,CAAR,CAAhB;AACA,MAAM+D,UAAU,mBAAA/D,CAAQ,EAAR,CAAhB;AACA,MAAMgE,eAAe,mBAAAhE,CAAQ,EAAR,CAArB;AACA,MAAMiE,UAAU,mBAAAjE,CAAQ,EAAR,CAAhB;AACA,MAAMkE,mBAAmB,mBAAAlE,CAAQ,EAAR,CAAzB;AACA,MAAMmE,QAAQ,mBAAAnE,CAAQ,EAAR,CAAd;AACA,SAASoE,GAAT,CAAaC,OAAb,EAAsB;AAClBtE,YAAQuE,QAAR,CAAiB;AACbC,aAAKJ,MAAM3D,OAAN,EADQ;AAEbgE,yBAAiB,CAACT,QAAQvD,OAAT,EAAkBwD,aAAaxD,OAA/B,EAAwCyD,QAAQzD,OAAhD,EAAyD0D,iBAAiB1D,OAA1E,CAFJ;AAGbiE,aAAKJ,OAHQ;AAIbK,oBAAY;AAJC,KAAjB;AAMH;AACD,IAAIL,UAAUM,SAASC,cAAT,CAAwB,KAAxB,CAAd;AACA,IAAIP,YAAY,IAAhB,EAAsB;AAClBQ,YAAQC,KAAR,CAAc,qBAAd;AACH,CAFD,MAGK;AACDV,QAAIC,OAAJ;AACH,C;;;;;;;ACtBD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA,qBAAqB,wBAAwB;AAC7C,mBAAmB,wBAAwB;AAC3C,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,sBAAsB,aAAa;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC;AACA,mBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA,2BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,oBAAoB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA,2BAA2B,2BAA2B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,oBAAoB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,yBAAyB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,+BAA+B;AAClD;AACA;AACA,mBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA,oC;;;;;;;AClTA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,iCAAiC;AAChD;AACA;AACA,KAAK;AACL;AACA;AACA,iC;;;;;;;AC9CA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;AACA,2CAA2C,OAAO;AAClD;AACA;AACA,qCAAqC,eAAe;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,mC;;;;;;;;;;;;;;;AC3CA;AAAA,kCAAkC,iCAAiC,eAAe,eAAe,gBAAgB,oBAAoB,MAAM,0CAA0C,+BAA+B,aAAa,qBAAqB,mCAAmC,EAAE,EAAE,cAAc,WAAW,UAAU,EAAE,UAAU,MAAM,yCAAyC,EAAE,UAAU,kBAAkB,EAAE,EAAE,aAAa,EAAE,2BAA2B,0BAA0B,YAAY,EAAE,2CAA2C,8BAA8B,EAAE,OAAO,6EAA6E,EAAE,GAAG,EAAE;;AAErpB;AAC8E;AACvD;AACvB;AACqB;AACL;AACS;;AAEzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA,WAAW,yDAAyD;AACpE,gBAAgB,kFAAkF;AAClG,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;ACnMqB;;AAErB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,C;;;;;;;;;;ACjCqB;;AAErB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;;AAEL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH,C;;;;;;;;;;ACxBqB;;AAErB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,C;;;;;;;;;;ACTqB;;AAErB;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,C;;;;;;;;;;ACRqB;;AAErB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;AACH,C;;;;;;;;;;AClBqB;AACP;;AAEd;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA,C;;;;;;;;;;ACrCqB;AACH;;AAElB;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;;AAEL;AACA;AACA;AACA,GAAG;AACH,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjBA;0EACA;AACuE;AAClC;AACR;AACH;AACV;AACQ;AACR;AACF;AACI;AAClB;AACA;;;;;;;;;;ACZA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,8CAA8C;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,yDAAyD;AACtF;AACA;AACA,6BAA6B,qCAAqC;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,wBAAwB,EAAE;AACvE;AACA;AACA;AACA,yBAAyB,oCAAoC;AAC7D;;;;;;;;;;;;AC3IyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,aAAa;AACxC;AACA,4BAA4B,kBAAkB;AAC9C,kCAAkC,cAAc;AAChD,gCAAgC;AAChC;AACA;AACA;AACA,oCAAoC,kBAAkB;AACtD,kCAAkC,cAAc;AAChD,qCAAqC,YAAY;AACjD,gCAAgC,2EAAiB;AACjD,iCAAiC,eAAe;AAChD,+BAA+B,aAAa;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;;;;;;;;;;;AC9FmB;AACnB;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACjFmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACnBmB;AACnB;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACNA;AACA;AACA;;;;;;;;;;ACFoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA,iCAAiC,2BAA2B,EAAE;AAC9D;AACA;;;;;;;;;;ACZ6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,yBAAyB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC7EqB;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,C;;;;;;;;;;ACTqB;;AAErB;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,C;;;;;;;;;;ACRqB;;AAErB;AACA,oEAAoE,aAAa;AACjF;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH,C;;;;;;;;;;ACjBqB;;AAErB;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL,GAAG;AACH,C;;;;;;;;;;ACZqB;;AAErB;AACA;AACA;AACA,GAAG;AACH,C;;;;;;;;;;;ACNqB;;AAErB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,C;;;;;;;;;;;AChBqB;;AAErB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,C;;;;;;;;;;ACxCc;AACW;;AAEzB;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,E;;;;;;;ACnDA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,iC;;;;;;;ACxBA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA,sC;;;;;;;ACtDA;AACA,8CAA8C,cAAc;AAC5D;AACA,+BAA+B,kBAAkB,SAAS,EAAE,EAAE;AAC9D;AACA,2BAA2B,iBAAiB,EAAE;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,kBAAkB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iC;;;;;;;ACrFA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,oBAAoB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0C;;;;;;;AC9FA;AACA;AACA;AACA;;AACA1E,OAAOC,cAAP,CAAsBC,OAAtB,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ACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,oBAAoB;AAC9B;AACA;;AAEA;AACA,UAAU,UAAU;AACpB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,sBAAsB;AACrD;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,eAAe;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;;;;;;;;AC/NA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AA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ACH,KAFD;AAGH;AACD,SAASiB,MAAT,CAAgB,EAAEhC,GAAF,EAAhB,EAAyB;AACrB,WAAO3D,QAAQ4F,CAAR,CAAU,aAAV,EAAyB,EAAEoC,MAAM;AAChCC,oBAAQY,QAAQlF,IAAInC,IAAJ,CAASkH,SAASG,KAAKnE,GAAd,CAAT,CADgB;AAEhCoE,qBAAS,MAAMnF,IAAInC,IAAJ,CAASmH,WAAT;AAFiB,SAAR,EAAzB,CAAP;AAIH,C;;;;;;;AC3BD;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,4CAA4C,wCAAwC,EAAE;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;;;;;;;ACvDA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,0CAA0C,EAAE;AACrH,SAAS;AACT;AACA,6BAA6B,kCAAkC,EAAE;AACjE;AACA;AACA,0CAA0C,uCAAuC,EAAE;AACnF,SAAS;AACT;AACA;AACA,8CAA8C,8CAA8C,EAAE;AAC9F;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,0CAA0C,0CAA0C,EAAE;AACtF,SAAS;AACT;AACA,0CAA0C,8CAA8C,EAAE;AAC1F,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,4CAA4C,yBAAyB,sBAAsB,EAAE;AAC7F,SAAS;AACT;AACA,4CAA4C,mBAAmB,sBAAsB,EAAE;AACvF,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,4CAA4C,2CAA2C,EAAE;AACzF,SAAS;AACT;AACA,4CAA4C,uCAAuC,EAAE;AACrF,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC3FA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA,sCAAsC,8KAA8K;AACpN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,4LAA4L;AAClO;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,sBAAsB,6BAA6B,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;AC7DA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mCAAmC,EAAE;AACrE,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACtBA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,wDAAwD;AAChF,sBAAsB,wDAAwD;AAC9E,uBAAuB,wDAAwD;AAC/E,yBAAyB,wDAAwD;AACjF,2BAA2B,2DAA2D;AACtF,4BAA4B,2DAA2D;AACvF,0BAA0B,2DAA2D;AACrF,2BAA2B;AAC3B,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;;;;;;;;AChFA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACxDA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,2BAA2B,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,yDAAyD,EAAE;AACrH,uDAAuD,wDAAwD,EAAE;AACjH,oCAAoC,6BAA6B;AACjE,6DAA6D,gBAAgB;AAC7E,6DAA6D,gBAAgB;AAC7E;AACA,wBAAwB,sCAAsC,YAAY,EAAE,EAAE;AAC9E;AACA;AACA;AACA;AACA,wBAAwB,oDAAoD;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AChEA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA,+UAA+U,+CAA+C,mFAAmF,kBAAkB,kBAAkB,mBAAmB;AACxgB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACtMA;;AACA/I,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA,MAAMC,UAAU,mBAAAC,CAAQ,CAAR,CAAhB;AACA,MAAMC,cAAc,mBAAAD,CAAQ,CAAR,CAApB;AACA,MAAM8I,eAAe,mBAAA9I,CAAQ,4IAAR,CAArB;AACA,MAAMa,eAAe,mBAAAb,CAAQ,EAAR,CAArB;AACA,MAAM+I,YAAY,EAAEC,MAAM,WAAR,EAAlB;AACA,MAAMC,WAAW,EAAED,MAAM,UAAR,EAAjB;AACA,MAAME,iBAAiB,EAAEF,MAAM,gBAAR,EAAvB;AACA,SAASzD,SAAT,CAAmBW,KAAnB,EAA0B;AACtB,WA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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 29);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 53ee2ccdaeae901bfdd0","\n\nexport function Observable(activate) {\n\n  function obs(val) {\n    return arguments.length === 0 ? obs._lastValue === UNSET ? undefined : obs._lastValue : obs._add(val);\n  }\n\n  obs._subscribers = [];\n  obs._activate = activate;\n  obs._lastValue = UNSET;\n\n  // Pre-bind _add as it's called as a detached function\n  obs._add = function (val, name) {\n    obs._lastValue = val;\n    obs._parentName = name;\n\n    pushNewValue(val, obs._subscribers, obs._name || name);\n\n    return obs;\n  };\n\n  var protoKeys = Object.keys(proto);\n  for (var i = 0; i < protoKeys.length; i++) {\n    obs[protoKeys[i]] = proto[protoKeys[i]];\n  }\n\n  return obs;\n}\n\nexport var proto = {\n\n  subscribe: function subscribe(cb) {\n    var self = this;\n    var _subscribers = this._subscribers,\n        _add = this._add,\n        _activate = this._activate,\n        _name = this._name;\n\n\n    if (_subscribers.length === 0) if (_activate) this._unsubscribe = _activate(_add);\n\n    _subscribers.push(cb);\n\n    if (this._lastValue !== UNSET) cb(this._lastValue, _name || this._parentName);\n\n    return function _unsubscribe() {\n      var index = _subscribers.indexOf(cb);\n\n      if (index > -1) {\n        _subscribers.splice(index, 1);\n\n        if (_subscribers.length === 0) self._unsubscribe && self._unsubscribe();\n      }\n    };\n  },\n\n  named: function named(name) {\n    this._name = name;\n    return this;\n  }\n\n};\n\nfunction pushNewValue(value, subscribers, name) {\n  for (var i = 0; i < subscribers.length; i++) {\n    subscribers[i](value, name);\n  }\n}\n\n// Internal marker\nvar UNSET = {};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/observable.js\n// module id = 0\n// module chunks = 0","\nimport { init } from 'snabbdom';\nimport h from 'snabbdom/h';\nimport toVNode from 'snabbdom/tovnode';\n\nimport { setPatchFunction, renderSync, Render } from './lib/render';\nimport Component from './lib/component';\nimport Message from './lib/message';\nimport { eventsModule } from './lib/events';\nimport { Observable } from './observable';\nimport { Store } from './store';\nimport log from './lib/log';\n\nfunction startApp(_ref) {\n  var app = _ref.app,\n      elm = _ref.elm,\n      replaceElm = _ref.replaceElm,\n      snabbdomModules = _ref.snabbdomModules;\n\n  var modules = snabbdomModules.concat(eventsModule);\n  setPatchFunction(init(modules));\n  renderSync(replaceElm ? toVNode(elm) : elm, app, replaceElm);\n}\n\nexport { Component, Message, Observable, Store, startApp, log, Render, h };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/main.js\n// module id = 1\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar cg = require(\"./types\");\nexports.colors = ['white', 'black'];\nexports.invRanks = [8, 7, 6, 5, 4, 3, 2, 1];\nexports.allKeys = (_a = Array.prototype).concat.apply(_a, cg.files.map(function (c) { return cg.ranks.map(function (r) { return c + r; }); }));\nexports.pos2key = function (pos) { return exports.allKeys[8 * pos[0] + pos[1] - 9]; };\nexports.key2pos = function (k) { return [k.charCodeAt(0) - 96, k.charCodeAt(1) - 48]; };\nfunction memo(f) {\n    var v;\n    var ret = function () {\n        if (v === undefined)\n            v = f();\n        return v;\n    };\n    ret.clear = function () { v = undefined; };\n    return ret;\n}\nexports.memo = memo;\nexports.timer = function () {\n    var startAt;\n    return {\n        start: function () { startAt = Date.now(); },\n        cancel: function () { startAt = undefined; },\n        stop: function () {\n            if (!startAt)\n                return 0;\n            var time = Date.now() - startAt;\n            startAt = undefined;\n            return time;\n        }\n    };\n};\nexports.opposite = function (c) { return c === 'white' ? 'black' : 'white'; };\nfunction containsX(xs, x) {\n    return xs !== undefined && xs.indexOf(x) !== -1;\n}\nexports.containsX = containsX;\nexports.distanceSq = function (pos1, pos2) {\n    return Math.pow(pos1[0] - pos2[0], 2) + Math.pow(pos1[1] - pos2[1], 2);\n};\nexports.samePiece = function (p1, p2) {\n    return p1.role === p2.role && p1.color === p2.color;\n};\nexports.computeIsTrident = function () { return window.navigator.userAgent.indexOf('Trident/') > -1; };\nvar posToTranslateBase = function (pos, asWhite, xFactor, yFactor) { return [\n    (asWhite ? pos[0] - 1 : 8 - pos[0]) * xFactor,\n    (asWhite ? 8 - pos[1] : pos[1] - 1) * yFactor\n]; };\nexports.posToTranslateAbs = function (bounds) {\n    var xFactor = bounds.width / 8, yFactor = bounds.height / 8;\n    return function (pos, asWhite) { return posToTranslateBase(pos, asWhite, xFactor, yFactor); };\n};\nexports.posToTranslateRel = function (pos, asWhite) { return posToTranslateBase(pos, asWhite, 12.5, 12.5); };\nexports.translateAbs = function (el, pos) {\n    el.style.transform = \"translate(\" + pos[0] + \"px,\" + pos[1] + \"px)\";\n};\nexports.translateRel = function (el, percents) {\n    el.style.left = percents[0] + '%';\n    el.style.top = percents[1] + '%';\n};\nexports.translateAway = function (el) { return exports.translateAbs(el, [-99999, -99999]); };\nexports.eventPosition = function (e) {\n    if (e.clientX || e.clientX === 0)\n        return [e.clientX, e.clientY];\n    if (e.touches && e.targetTouches[0])\n        return [e.targetTouches[0].clientX, e.targetTouches[0].clientY];\n    return undefined;\n};\nexports.isRightButton = function (e) { return e.buttons === 2 || e.button === 2; };\nexports.createEl = function (tagName, className) {\n    var el = document.createElement(tagName);\n    if (className)\n        el.className = className;\n    return el;\n};\nexports.raf = (window.requestAnimationFrame || window.setTimeout).bind(window);\nvar _a;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/util.js\n// module id = 2\n// module chunks = 0","var lift = function (obj) {\n    if (obj instanceof Array)\n        return new ArrayOps(obj);\n    if (obj instanceof Date)\n        return new DateOps(obj);\n    if (typeof obj === 'string')\n        return new StringOps(obj);\n    if (typeof obj === 'number')\n        return new NumberOps(obj);\n    return new ObjectOps(obj);\n};\nexport default lift;\nexport function getValue(input) {\n    return input && input['_isLiftWrapper']\n        ? input.value()\n        : input;\n}\nfunction makeOps() {\n    var Ops = /** @class */ (function () {\n        function Ops(_value) {\n            this._value = _value;\n            this._isLiftWrapper = true;\n        }\n        Ops.prototype.value = function () { return this._value; };\n        return Ops;\n    }());\n    return Ops;\n}\nexport var ArrayOps = makeOps();\nexport var ObjectOps = makeOps();\nexport var NumberOps = makeOps();\nexport var StringOps = makeOps();\nexport var DateOps = makeOps();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/space-lift/es/lift.js\n// module id = 3\n// module chunks = 0","//--------------------------------------\r\n//  Shallow update\r\n//--------------------------------------\r\n/** Performs a shallow update of an object using a partial object of the same shape. A new object is returned. */\r\nexport function update(host, spec) {\r\n    var result = clone(host);\r\n    for (var key in spec) {\r\n        var specValue = spec[key];\r\n        if (specValue === DELETE) {\r\n            delete result[key];\r\n        }\r\n        else {\r\n            result[key] = specValue;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n// We lie about the public type so that only a property that is optional or that can be assigned to undefined can be DELETE'd\r\n/** Marker used to delete a key */\r\nexport var DELETE = {};\r\nvar _Updater = /** @class */ (function () {\r\n    function _Updater(data) {\r\n        this.data = data;\r\n    }\r\n    _Updater.prototype.at = function (keyOrIndex) {\r\n        return new _Updater({ type: 'at', parent: this, field: keyOrIndex });\r\n    };\r\n    _Updater.prototype.set = function (value) {\r\n        var _this = this;\r\n        var doSet = function (target) {\r\n            var result = _this.cloneForUpdate(target);\r\n            if (result.name === 'aborted')\r\n                return target;\r\n            var clonedTarget = result.clonedTarget, leafHost = result.leafHost, field = result.field;\r\n            value === DELETE ? delete leafHost[field] : leafHost[field] = value;\r\n            return clonedTarget;\r\n        };\r\n        var boundTarget = this.findBoundTarget();\r\n        return boundTarget\r\n            ? doSet(boundTarget)\r\n            : doSet;\r\n    };\r\n    _Updater.prototype.modify = function (modifier) {\r\n        var _this = this;\r\n        var doModify = function (target) {\r\n            var result = _this.cloneForUpdate(target);\r\n            if (result.name === 'aborted')\r\n                return target;\r\n            var clonedTarget = result.clonedTarget, leafHost = result.leafHost, field = result.field;\r\n            var value = modifier(leafHost[field]);\r\n            value === DELETE ? delete leafHost[field] : leafHost[field] = value;\r\n            return clonedTarget;\r\n        };\r\n        var boundTarget = this.findBoundTarget();\r\n        return boundTarget\r\n            ? doModify(boundTarget)\r\n            : doModify;\r\n    };\r\n    _Updater.prototype.withDefault = function (value) {\r\n        return new _Updater({ type: 'withDefault', parent: this, defaultValue: value });\r\n    };\r\n    _Updater.prototype.abortIfNot = function (predicate) {\r\n        return new _Updater({ type: 'abortIfNot', parent: this, predicate: predicate });\r\n    };\r\n    _Updater.prototype.abortIfUndef = function () {\r\n        return this.abortIfNot(function (value) { return value !== undefined; });\r\n    };\r\n    _Updater.prototype.findBoundTarget = function () {\r\n        var current = this;\r\n        while (true) {\r\n            if (current.data.type === 'root')\r\n                return current.data.boundTarget;\r\n            current = current.data.parent;\r\n        }\r\n    };\r\n    _Updater.prototype.parentUpdaters = function () {\r\n        var updaters = [this];\r\n        var parentUpdater = this.data.parent;\r\n        // Ignore the root updater\r\n        while (parentUpdater && parentUpdater.data.parent) {\r\n            updaters.unshift(parentUpdater);\r\n            parentUpdater = parentUpdater.data.parent;\r\n        }\r\n        return updaters;\r\n    };\r\n    _Updater.prototype.getNextValue = function (previousHost, host, field, isLast) {\r\n        if (this.data.type === 'at') {\r\n            var newField = this.data.field;\r\n            var value = host[newField];\r\n            var nextValue = isObjectOrArray(value) ? clone(value) : value;\r\n            var newHost_1 = isLast ? host : nextValue;\r\n            host[this.data.field] = nextValue;\r\n            return { host: newHost_1, field: newField };\r\n        }\r\n        if (this.data.type === 'abortIfNot' && this.data.predicate(host) === false) {\r\n            return { host: host, field: field, aborted: true };\r\n        }\r\n        if (this.data.type === 'withDefault' && previousHost[field] === undefined) {\r\n            var nextValue = this.data.defaultValue;\r\n            var newHost_2 = isLast ? previousHost : nextValue;\r\n            previousHost[field] = nextValue;\r\n            return { host: newHost_2, field: field };\r\n        }\r\n        var newHost = isLast ? previousHost : host;\r\n        return { host: newHost, field: field };\r\n    };\r\n    _Updater.prototype.cloneForUpdate = function (target) {\r\n        var updaters = this.parentUpdaters();\r\n        var obj = clone(target);\r\n        var previousHost = obj;\r\n        var host = obj;\r\n        var field = '';\r\n        for (var i = 0; i < updaters.length; i++) {\r\n            var result = updaters[i].getNextValue(previousHost, host, field, i === updaters.length - 1);\r\n            if (result.aborted)\r\n                return { name: 'aborted' };\r\n            previousHost = host;\r\n            host = result.host;\r\n            field = result.field;\r\n        }\r\n        return {\r\n            name: 'result',\r\n            clonedTarget: obj,\r\n            leafHost: host,\r\n            field: field\r\n        };\r\n    };\r\n    return _Updater;\r\n}());\r\nfunction isObjectOrArray(obj) {\r\n    return obj !== null && typeof obj === 'object';\r\n}\r\nfunction clone(obj) {\r\n    if (Array.isArray(obj))\r\n        return obj.slice();\r\n    var cloned = {};\r\n    Object.keys(obj).forEach(function (key) { cloned[key] = obj[key]; });\r\n    return cloned;\r\n}\r\nexport function deepUpdate(target) {\r\n    return new _Updater({ type: 'root', boundTarget: target });\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/immupdate/es/immupdate.js\n// module id = 4\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst kaiju_1 = require(\"kaiju\");\nconst immupdate_1 = require(\"immupdate\");\n//-----------------------------------------------------------------------------------------\nexports.navigate = kaiju_1.Message('navigate');\n//-----------------------------------------------------------------------------------------\nvar Route;\n(function (Route) {\n    Route[Route[\"Splash\"] = 0] = \"Splash\";\n    Route[Route[\"Reader\"] = 1] = \"Reader\";\n    Route[Route[\"Dashboard\"] = 2] = \"Dashboard\";\n})(Route = exports.Route || (exports.Route = {}));\n//-----------------------------------------------------------------------------------------\nconst initialState = { route: Route.Splash };\n//-----------------------------------------------------------------------------------------\nexports.default = kaiju_1.Store(initialState, on => {\n    on(exports.navigate, (state, route) => immupdate_1.update(state, { route: route }));\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/stores/route.ts","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vnode_1 = require(\"./vnode\");\nvar is = require(\"./is\");\nfunction addNS(data, children, sel) {\n    data.ns = 'http://www.w3.org/2000/svg';\n    if (sel !== 'foreignObject' && children !== undefined) {\n        for (var i = 0; i < children.length; ++i) {\n            var childData = children[i].data;\n            if (childData !== undefined) {\n                addNS(childData, children[i].children, children[i].sel);\n            }\n        }\n    }\n}\nfunction h(sel, b, c) {\n    var data = {}, children, text, i;\n    if (c !== undefined) {\n        data = b;\n        if (is.array(c)) {\n            children = c;\n        }\n        else if (is.primitive(c)) {\n            text = c;\n        }\n        else if (c && c.sel) {\n            children = [c];\n        }\n    }\n    else if (b !== undefined) {\n        if (is.array(b)) {\n            children = b;\n        }\n        else if (is.primitive(b)) {\n            text = b;\n        }\n        else if (b && b.sel) {\n            children = [b];\n        }\n        else {\n            data = b;\n        }\n    }\n    if (is.array(children)) {\n        for (i = 0; i < children.length; ++i) {\n            if (is.primitive(children[i]))\n                children[i] = vnode_1.vnode(undefined, undefined, undefined, children[i]);\n        }\n    }\n    if (sel[0] === 's' && sel[1] === 'v' && sel[2] === 'g' &&\n        (sel.length === 3 || sel[3] === '.' || sel[3] === '#')) {\n        addNS(data, children, sel);\n    }\n    return vnode_1.vnode(sel, data, children, text, undefined);\n}\nexports.h = h;\n;\nexports.default = h;\n//# sourceMappingURL=h.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/snabbdom/h.js\n// module id = 6\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction vnode(sel, data, children, text, elm) {\n    var key = data === undefined ? undefined : data.key;\n    return { sel: sel, data: data, children: children,\n        text: text, elm: elm, key: key };\n}\nexports.vnode = vnode;\nexports.default = vnode;\n//# sourceMappingURL=vnode.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/snabbdom/vnode.js\n// module id = 7\n// module chunks = 0","\n\nexport default {\n  render: false,\n  message: false\n};\n\nexport function shouldLog(log, key) {\n  return log === true || log === key;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/lib/log.js\n// module id = 8\n// module chunks = 0","import { Observable, proto } from './observable';\nimport _debounce from './debounce';\nimport _delay from './delay';\nimport _drop from './drop';\nimport _filter from './filter';\nimport _flatMapLatest from './flatMapLatest';\nimport _fromEvent from './fromEvent';\nimport _fromPromise from './fromPromise';\nimport _interval from './interval';\nimport _map from './map';\nimport _merge from './merge';\nimport _partition from './partition';\nimport _pure from './pure';\nimport _sliding, { sliding2 } from './sliding';\nimport _throttle from './throttle';\n\n// Enrich the Observable \"prototype\" till (maybe) we have the |> operator!\nproto.debounce = function (time) {\n  return _debounce(time, this);\n};\nproto.delay = function (time) {\n  return _delay(time, this);\n};\nproto.drop = function (count) {\n  return _drop(count, this);\n};\nproto.filter = function (fn) {\n  return _filter(fn, this);\n};\nproto.flatMapLatest = function (fn) {\n  return _flatMapLatest(fn, this);\n};\nproto.map = function (fn) {\n  return _map(fn, this);\n};\nproto.partition = function (predicate) {\n  return _partition(predicate, this);\n};\nproto.sliding = function (num) {\n  return _sliding(num, this);\n};\nproto.sliding2 = function () {\n  return sliding2(this);\n};\nproto.throttle = function (time) {\n  return _throttle(time, this);\n};\n\n// Enrich the Observable object\nObservable.pure = _pure;\nObservable.fromEvent = _fromEvent;\nObservable.fromPromise = _fromPromise;\nObservable.interval = _interval;\nObservable.merge = _merge;\n\nexport { Observable };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/index.js\n// module id = 9\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nvar premove_1 = require(\"./premove\");\nfunction callUserFunction(f) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    if (f)\n        setTimeout(function () { return f.apply(void 0, args); }, 1);\n}\nexports.callUserFunction = callUserFunction;\nfunction toggleOrientation(state) {\n    state.orientation = util_1.opposite(state.orientation);\n    state.animation.current =\n        state.draggable.current =\n            state.selected = undefined;\n}\nexports.toggleOrientation = toggleOrientation;\nfunction reset(state) {\n    state.lastMove = undefined;\n    unselect(state);\n    unsetPremove(state);\n    unsetPredrop(state);\n}\nexports.reset = reset;\nfunction setPieces(state, pieces) {\n    for (var key in pieces) {\n        var piece = pieces[key];\n        if (piece)\n            state.pieces[key] = piece;\n        else\n            delete state.pieces[key];\n    }\n}\nexports.setPieces = setPieces;\nfunction setCheck(state, color) {\n    if (color === true)\n        color = state.turnColor;\n    if (!color)\n        state.check = undefined;\n    else\n        for (var k in state.pieces) {\n            if (state.pieces[k].role === 'king' && state.pieces[k].color === color) {\n                state.check = k;\n            }\n        }\n}\nexports.setCheck = setCheck;\nfunction setPremove(state, orig, dest, meta) {\n    unsetPredrop(state);\n    state.premovable.current = [orig, dest];\n    callUserFunction(state.premovable.events.set, orig, dest, meta);\n}\nfunction unsetPremove(state) {\n    if (state.premovable.current) {\n        state.premovable.current = undefined;\n        callUserFunction(state.premovable.events.unset);\n    }\n}\nexports.unsetPremove = unsetPremove;\nfunction setPredrop(state, role, key) {\n    unsetPremove(state);\n    state.predroppable.current = {\n        role: role,\n        key: key\n    };\n    callUserFunction(state.predroppable.events.set, role, key);\n}\nfunction unsetPredrop(state) {\n    var pd = state.predroppable;\n    if (pd.current) {\n        pd.current = undefined;\n        callUserFunction(pd.events.unset);\n    }\n}\nexports.unsetPredrop = unsetPredrop;\nfunction tryAutoCastle(state, orig, dest) {\n    if (!state.autoCastle)\n        return false;\n    var king = state.pieces[orig];\n    if (king.role !== 'king')\n        return false;\n    var origPos = util_1.key2pos(orig);\n    if (origPos[0] !== 5)\n        return false;\n    if (origPos[1] !== 1 && origPos[1] !== 8)\n        return false;\n    var destPos = util_1.key2pos(dest);\n    var oldRookPos, newRookPos, newKingPos;\n    if (destPos[0] === 7 || destPos[0] === 8) {\n        oldRookPos = util_1.pos2key([8, origPos[1]]);\n        newRookPos = util_1.pos2key([6, origPos[1]]);\n        newKingPos = util_1.pos2key([7, origPos[1]]);\n    }\n    else if (destPos[0] === 3 || destPos[0] === 1) {\n        oldRookPos = util_1.pos2key([1, origPos[1]]);\n        newRookPos = util_1.pos2key([4, origPos[1]]);\n        newKingPos = util_1.pos2key([3, origPos[1]]);\n    }\n    else\n        return false;\n    var rook = state.pieces[oldRookPos];\n    if (rook.role !== 'rook')\n        return false;\n    delete state.pieces[orig];\n    delete state.pieces[oldRookPos];\n    state.pieces[newKingPos] = king;\n    state.pieces[newRookPos] = rook;\n    return true;\n}\nfunction baseMove(state, orig, dest) {\n    if (orig === dest || !state.pieces[orig])\n        return false;\n    var captured = (state.pieces[dest] &&\n        state.pieces[dest].color !== state.pieces[orig].color) ? state.pieces[dest] : undefined;\n    if (dest == state.selected)\n        unselect(state);\n    callUserFunction(state.events.move, orig, dest, captured);\n    if (!tryAutoCastle(state, orig, dest)) {\n        state.pieces[dest] = state.pieces[orig];\n        delete state.pieces[orig];\n    }\n    state.lastMove = [orig, dest];\n    state.check = undefined;\n    callUserFunction(state.events.change);\n    return captured || true;\n}\nexports.baseMove = baseMove;\nfunction baseNewPiece(state, piece, key, force) {\n    if (state.pieces[key]) {\n        if (force)\n            delete state.pieces[key];\n        else\n            return false;\n    }\n    callUserFunction(state.events.dropNewPiece, piece, key);\n    state.pieces[key] = piece;\n    state.lastMove = [key];\n    state.check = undefined;\n    callUserFunction(state.events.change);\n    state.movable.dests = undefined;\n    state.turnColor = util_1.opposite(state.turnColor);\n    return true;\n}\nexports.baseNewPiece = baseNewPiece;\nfunction baseUserMove(state, orig, dest) {\n    var result = baseMove(state, orig, dest);\n    if (result) {\n        state.movable.dests = undefined;\n        state.turnColor = util_1.opposite(state.turnColor);\n        state.animation.current = undefined;\n    }\n    return result;\n}\nfunction userMove(state, orig, dest) {\n    if (canMove(state, orig, dest)) {\n        var result = baseUserMove(state, orig, dest);\n        if (result) {\n            var holdTime = state.hold.stop();\n            unselect(state);\n            var metadata = {\n                premove: false,\n                ctrlKey: state.stats.ctrlKey,\n                holdTime: holdTime\n            };\n            if (result !== true)\n                metadata.captured = result;\n            callUserFunction(state.movable.events.after, orig, dest, metadata);\n            return true;\n        }\n    }\n    else if (canPremove(state, orig, dest)) {\n        setPremove(state, orig, dest, {\n            ctrlKey: state.stats.ctrlKey\n        });\n        unselect(state);\n    }\n    else if (isMovable(state, dest) || isPremovable(state, dest)) {\n        setSelected(state, dest);\n        state.hold.start();\n    }\n    else\n        unselect(state);\n    return false;\n}\nexports.userMove = userMove;\nfunction dropNewPiece(state, orig, dest, force) {\n    if (canDrop(state, orig, dest) || force) {\n        var piece = state.pieces[orig];\n        delete state.pieces[orig];\n        baseNewPiece(state, piece, dest, force);\n        callUserFunction(state.movable.events.afterNewPiece, piece.role, dest, {\n            predrop: false\n        });\n    }\n    else if (canPredrop(state, orig, dest)) {\n        setPredrop(state, state.pieces[orig].role, dest);\n    }\n    else {\n        unsetPremove(state);\n        unsetPredrop(state);\n    }\n    delete state.pieces[orig];\n    unselect(state);\n}\nexports.dropNewPiece = dropNewPiece;\nfunction selectSquare(state, key, force) {\n    if (state.selected) {\n        if (state.selected === key && !state.draggable.enabled) {\n            unselect(state);\n            state.hold.cancel();\n        }\n        else if ((state.selectable.enabled || force) && state.selected !== key) {\n            if (userMove(state, state.selected, key))\n                state.stats.dragged = false;\n        }\n        else\n            state.hold.start();\n    }\n    else if (isMovable(state, key) || isPremovable(state, key)) {\n        setSelected(state, key);\n        state.hold.start();\n    }\n    callUserFunction(state.events.select, key);\n}\nexports.selectSquare = selectSquare;\nfunction setSelected(state, key) {\n    state.selected = key;\n    if (isPremovable(state, key)) {\n        state.premovable.dests = premove_1.default(state.pieces, key, state.premovable.castle);\n    }\n    else\n        state.premovable.dests = undefined;\n}\nexports.setSelected = setSelected;\nfunction unselect(state) {\n    state.selected = undefined;\n    state.premovable.dests = undefined;\n    state.hold.cancel();\n}\nexports.unselect = unselect;\nfunction isMovable(state, orig) {\n    var piece = state.pieces[orig];\n    return piece && (state.movable.color === 'both' || (state.movable.color === piece.color &&\n        state.turnColor === piece.color));\n}\nfunction canMove(state, orig, dest) {\n    return orig !== dest && isMovable(state, orig) && (state.movable.free || (!!state.movable.dests && util_1.containsX(state.movable.dests[orig], dest)));\n}\nexports.canMove = canMove;\nfunction canDrop(state, orig, dest) {\n    var piece = state.pieces[orig];\n    return piece && dest && (orig === dest || !state.pieces[dest]) && (state.movable.color === 'both' || (state.movable.color === piece.color &&\n        state.turnColor === piece.color));\n}\nfunction isPremovable(state, orig) {\n    var piece = state.pieces[orig];\n    return piece && state.premovable.enabled &&\n        state.movable.color === piece.color &&\n        state.turnColor !== piece.color;\n}\nfunction canPremove(state, orig, dest) {\n    return orig !== dest &&\n        isPremovable(state, orig) &&\n        util_1.containsX(premove_1.default(state.pieces, orig, state.premovable.castle), dest);\n}\nfunction canPredrop(state, orig, dest) {\n    var piece = state.pieces[orig];\n    return piece && dest &&\n        (!state.pieces[dest] || state.pieces[dest].color !== state.movable.color) &&\n        state.predroppable.enabled &&\n        (piece.role !== 'pawn' || (dest[1] !== '1' && dest[1] !== '8')) &&\n        state.movable.color === piece.color &&\n        state.turnColor !== piece.color;\n}\nfunction isDraggable(state, orig) {\n    var piece = state.pieces[orig];\n    return piece && state.draggable.enabled && (state.movable.color === 'both' || (state.movable.color === piece.color && (state.turnColor === piece.color || state.premovable.enabled)));\n}\nexports.isDraggable = isDraggable;\nfunction playPremove(state) {\n    var move = state.premovable.current;\n    if (!move)\n        return false;\n    var orig = move[0], dest = move[1];\n    var success = false;\n    if (canMove(state, orig, dest)) {\n        var result = baseUserMove(state, orig, dest);\n        if (result) {\n            var metadata = { premove: true };\n            if (result !== true)\n                metadata.captured = result;\n            callUserFunction(state.movable.events.after, orig, dest, metadata);\n            success = true;\n        }\n    }\n    unsetPremove(state);\n    return success;\n}\nexports.playPremove = playPremove;\nfunction playPredrop(state, validate) {\n    var drop = state.predroppable.current, success = false;\n    if (!drop)\n        return false;\n    if (validate(drop)) {\n        var piece = {\n            role: drop.role,\n            color: state.movable.color\n        };\n        if (baseNewPiece(state, piece, drop.key)) {\n            callUserFunction(state.movable.events.afterNewPiece, drop.role, drop.key, {\n                predrop: true\n            });\n            success = true;\n        }\n    }\n    unsetPredrop(state);\n    return success;\n}\nexports.playPredrop = playPredrop;\nfunction cancelMove(state) {\n    unsetPremove(state);\n    unsetPredrop(state);\n    unselect(state);\n}\nexports.cancelMove = cancelMove;\nfunction stop(state) {\n    state.movable.color =\n        state.movable.dests =\n            state.animation.current = undefined;\n    cancelMove(state);\n}\nexports.stop = stop;\nfunction getKeyAtDomPos(pos, asWhite, bounds) {\n    var file = Math.ceil(8 * ((pos[0] - bounds.left) / bounds.width));\n    if (!asWhite)\n        file = 9 - file;\n    var rank = Math.ceil(8 - (8 * ((pos[1] - bounds.top) / bounds.height)));\n    if (!asWhite)\n        rank = 9 - rank;\n    return (file > 0 && file < 9 && rank > 0 && rank < 9) ? util_1.pos2key([file, rank]) : undefined;\n}\nexports.getKeyAtDomPos = getKeyAtDomPos;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/board.js\n// module id = 10\n// module chunks = 0","\nexport function Set() {\n  var set = {};\n  for (var i = 0; i < arguments.length; i++) {\n    set[arguments[i]] = 1;\n  }\n  return set;\n}\n\n/* Efficient shallow comparison of two objects */\n\nexport function shallowEqual(objA, objB) {\n  if (objA === objB) return true;\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) return;\n\n  // Test for A's keys different from B's.\n  for (var i = 0; i < keysA.length; i++) {\n    var valA = objA[keysA[i]];\n    var valB = objB[keysA[i]];\n\n    if (valA !== valB) {\n      if (valA && valA.type === 'partiallyAppliedMessage') {\n        // A partially applied message will always have a new reference,\n        // so compare the references of the payloads instead.\n        // It is assumed Messages are stable for a given key.\n        if (valA.payload !== valB.payload) return false;\n      } else return false;\n    }\n  }\n\n  return true;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/lib/util.js\n// module id = 11\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.files = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];\nexports.ranks = [1, 2, 3, 4, 5, 6, 7, 8];\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/types.js\n// module id = 12\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nvar cg = require(\"./types\");\nexports.initial = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR';\nvar roles = { p: 'pawn', r: 'rook', n: 'knight', b: 'bishop', q: 'queen', k: 'king' };\nvar letters = { pawn: 'p', rook: 'r', knight: 'n', bishop: 'b', queen: 'q', king: 'k' };\nfunction read(fen) {\n    if (fen === 'start')\n        fen = exports.initial;\n    var pieces = {};\n    var row = 8;\n    var col = 0;\n    for (var _i = 0, fen_1 = fen; _i < fen_1.length; _i++) {\n        var c = fen_1[_i];\n        switch (c) {\n            case ' ': return pieces;\n            case '/':\n                --row;\n                if (row === 0)\n                    return pieces;\n                col = 0;\n                break;\n            case '~':\n                pieces[util_1.pos2key([col, row])].promoted = true;\n                break;\n            default:\n                var nb = c.charCodeAt(0);\n                if (nb < 57)\n                    col += nb - 48;\n                else {\n                    ++col;\n                    var role = c.toLowerCase();\n                    pieces[util_1.pos2key([col, row])] = {\n                        role: roles[role],\n                        color: (c === role ? 'black' : 'white')\n                    };\n                }\n        }\n    }\n    return pieces;\n}\nexports.read = read;\nfunction write(pieces) {\n    var piece, letter;\n    return util_1.invRanks.map(function (y) { return cg.ranks.map(function (x) {\n        piece = pieces[util_1.pos2key([x, y])];\n        if (piece) {\n            letter = letters[piece.role];\n            return piece.color === 'white' ? letter.toUpperCase() : letter;\n        }\n        else\n            return '1';\n    }).join(''); }).join('/').replace(/1{2,}/g, function (s) { return s.length.toString(); });\n}\nexports.write = write;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/fen.js\n// module id = 13\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.array = Array.isArray;\nfunction primitive(s) {\n    return typeof s === 'string' || typeof s === 'number';\n}\nexports.primitive = primitive;\n//# sourceMappingURL=is.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/snabbdom/is.js\n// module id = 14\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction createElement(tagName) {\n    return document.createElement(tagName);\n}\nfunction createElementNS(namespaceURI, qualifiedName) {\n    return document.createElementNS(namespaceURI, qualifiedName);\n}\nfunction createTextNode(text) {\n    return document.createTextNode(text);\n}\nfunction createComment(text) {\n    return document.createComment(text);\n}\nfunction insertBefore(parentNode, newNode, referenceNode) {\n    parentNode.insertBefore(newNode, referenceNode);\n}\nfunction removeChild(node, child) {\n    node.removeChild(child);\n}\nfunction appendChild(node, child) {\n    node.appendChild(child);\n}\nfunction parentNode(node) {\n    return node.parentNode;\n}\nfunction nextSibling(node) {\n    return node.nextSibling;\n}\nfunction tagName(elm) {\n    return elm.tagName;\n}\nfunction setTextContent(node, text) {\n    node.textContent = text;\n}\nfunction getTextContent(node) {\n    return node.textContent;\n}\nfunction isElement(node) {\n    return node.nodeType === 1;\n}\nfunction isText(node) {\n    return node.nodeType === 3;\n}\nfunction isComment(node) {\n    return node.nodeType === 8;\n}\nexports.htmlDomApi = {\n    createElement: createElement,\n    createElementNS: createElementNS,\n    createTextNode: createTextNode,\n    createComment: createComment,\n    insertBefore: insertBefore,\n    removeChild: removeChild,\n    appendChild: appendChild,\n    parentNode: parentNode,\n    nextSibling: nextSibling,\n    tagName: tagName,\n    setTextContent: setTextContent,\n    getTextContent: getTextContent,\n    isElement: isElement,\n    isText: isText,\n    isComment: isComment,\n};\nexports.default = exports.htmlDomApi;\n//# sourceMappingURL=htmldomapi.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/snabbdom/htmldomapi.js\n// module id = 15\n// module chunks = 0","import h from 'snabbdom/h';\nimport { vnode as VNode } from 'snabbdom/vnode';\nimport log, { shouldLog } from './log';\n\nvar componentsToRender = [];\nvar nodesToRender = [];\nvar scheduledDOMReads = [];\nvar scheduledDOMWrites = [];\nvar rendering = false;\nvar nextRender = undefined;\nvar renderBeginTime = undefined;\nvar _isFirstRender = true;\nvar patch = void 0;\n\nexport function setPatchFunction(value) {\n  patch = value;\n}\n\nexport var Render = {\n  into: renderInto,\n  isFirst: isFirstRender,\n  scheduleDOMRead: scheduleDOMRead,\n  scheduleDOMWrite: scheduleDOMWrite\n};\n\nexport function isFirstRender() {\n  return _isFirstRender;\n}\n\n/**\r\n * Generic render function for arbitrary VDOM rendering\r\n */\nexport function renderInto(target, vdom, onComplete) {\n  var task = {\n    target: target,\n    vdom: vdom,\n    onComplete: onComplete,\n    cancelled: false\n  };\n\n  nodesToRender.push(task);\n\n  renderNextFrame();\n\n  return function cancel() {\n    task.cancelled = true;\n  };\n}\n\n// Used by startApp\nexport function renderSync(target, vdom, replace) {\n  var task = {\n    target: target,\n    vdom: vdom,\n    replace: replace\n  };\n\n  nodesToRender.push(task);\n\n  renderNow();\n}\n\n/* Render a component immediately. This is used internally and it is assumed a render phase is already ongoing */\nexport function renderComponentNow(component) {\n  if (componentsToRender.indexOf(component) === -1) componentsToRender.push(component);\n}\n\n/* Optimization of the above function: A new component cannot be possibly found in the render queue */\nexport function renderNewComponentNow(component) {\n  componentsToRender.push(component);\n}\n\nexport function renderComponentNextFrame(component) {\n  if (rendering) {\n    // This is pretty bad but not breaking: It means the developer\n    // synchronously send a message inside a render() function.\n    // Probably just a mistake.\n    console.warn('A component tried to re-render while a rendering was already ongoing', component.elm);\n    return;\n  }\n\n  // This component is already scheduled for the next redraw.\n  // For instance, this can happen while the app's tab is inactive,\n  // or when synchronously sending a few messages.\n  // Avoids doing more work than necessary when re-activating it.\n  if (componentsToRender.indexOf(component) !== -1) return;\n\n  componentsToRender.push(component);\n\n  renderNextFrame();\n}\n\nfunction renderNextFrame() {\n  if (!nextRender && !rendering) nextRender = requestAnimationFrame(renderNow);\n}\n\nfunction renderComponent(component) {\n  var props = component.props,\n      store = component.store,\n      messages = component.messages,\n      elm = component.elm,\n      render = component.render,\n      vnode = component.vnode,\n      destroyed = component.destroyed;\n\n  // Bail if the component is already destroyed.\n  // This can happen if the parent renders first and decide a child component should be removed.\n\n  if (destroyed) return;\n\n  var beforeRender = void 0;\n\n  if (log.render) beforeRender = performance.now();\n\n  var target = vnode || elm;\n  var newVNode = render({ props: props, state: store.state(), msg: messages }) || emptyNode();\n\n  patchInto(target, newVNode);\n\n  if (shouldLog(log.render, component.key)) {\n    var renderTime = Math.round((performance.now() - beforeRender) * 100) / 100;\n    console.log('Render component %c' + component.key, 'font-weight: bold', renderTime + ' ms', '| props: ', props, '| state: ', store.state());\n  }\n\n  component.lifecycle.rendered(component, newVNode);\n}\n\nfunction renderNow() {\n  rendering = true;\n  nextRender = undefined;\n\n  logBeginRender();\n\n  // Render components in a top-down fashion.\n  // This ensures the rendering order is predictive and props/states are consistent.\n  // If we didn't do that, a component could first be rendered following a state change\n  // but then miss out on a props change from its parent.\n  componentsToRender.sort(function (compA, compB) {\n    return compA.depth - compB.depth;\n  });\n\n  processRenderQueue();\n\n  processDOMReadsWrites();\n\n  rendering = false;\n  _isFirstRender = false;\n\n  logEndRender();\n}\n\nfunction processRenderQueue() {\n  var completeCallbacks = [];\n\n  while (nodesToRender.length || componentsToRender.length) {\n    while (nodesToRender.length) {\n      var _nodesToRender$shift = nodesToRender.shift(),\n          target = _nodesToRender$shift.target,\n          vdom = _nodesToRender$shift.vdom,\n          replace = _nodesToRender$shift.replace,\n          onComplete = _nodesToRender$shift.onComplete,\n          cancelled = _nodesToRender$shift.cancelled;\n\n      if (cancelled) continue;\n      replace ? patch(target, vdom) : patchInto(target, vdom);\n      if (onComplete) completeCallbacks.push(onComplete);\n    }\n\n    while (componentsToRender.length) {\n      var component = componentsToRender.shift();\n      renderComponent(component);\n    }\n\n    // Wait for the components indirectly introduced via renderInto to be rendered\n    while (completeCallbacks.length) {\n      completeCallbacks.shift()();\n    }\n  }\n}\n\nfunction processDOMReadsWrites() {\n  while (scheduledDOMReads.length || scheduledDOMWrites.length) {\n\n    while (scheduledDOMReads.length) {\n      scheduledDOMReads.shift()();\n    }\n\n    while (scheduledDOMWrites.length) {\n      scheduledDOMWrites.shift()();\n    }\n  }\n}\n\nfunction scheduleDOMRead(callback) {\n  scheduledDOMReads.push(callback);\n  renderNextFrame();\n}\n\nfunction scheduleDOMWrite(callback) {\n  scheduledDOMWrites.push(callback);\n  renderNextFrame();\n}\n\nfunction logBeginRender() {\n  if (log.render) {\n    renderBeginTime = performance.now();\n    console.log('%cRender - begin', 'color: orange');\n  }\n}\n\nfunction logEndRender() {\n  if (log.render) {\n    var time = Math.round((performance.now() - renderBeginTime) * 100) / 100;\n    console.log('%cRender - end (' + time + 'ms)\\n\\n\\n', 'color: orange');\n  }\n}\n\nfunction patchInto(target, node) {\n  var targetIsArray = Array.isArray(target);\n  var nodeIsArray = Array.isArray(node);\n\n  if (nodeIsArray) mapPrimitiveNodes(node);\n\n  // First render inside an Element\n  if (target.elm === undefined) {\n    patch(VNode('dummy', {}, [], undefined, target), VNode('dummy', {}, nodeIsArray ? node : [node]));\n\n    if (nodeIsArray) node.elm = target;\n  }\n  // Update using a previous VNode or VNode[] to patch against\n  else {\n      if (targetIsArray) {\n        patch(VNode('dummy', {}, target, undefined, target.elm), VNode('dummy', {}, nodeIsArray ? node : [node]));\n      } else {\n        patch(target, node);\n      }\n\n      if (nodeIsArray) node.elm = target.elm;\n    }\n}\n\n/*\r\n  Similar to what h() does for its children. We have to do it here ourselves\r\n  when we are passed an Array of Nodes as it didn't go through the h() transformation.\r\n  The operation is mutative, so that the Array of Nodes can later be reused for patching.\r\n  This is consistent with the snabbdom's way.\r\n*/\nfunction mapPrimitiveNodes(arr) {\n  for (var i = 0; i < arr.length; ++i) {\n    var node = arr[i];\n    if (typeof node === 'string' || typeof node === 'number') arr[i] = VNode(undefined, undefined, undefined, node);\n  }\n}\n\nvar emptyNode = function emptyNode() {\n  return VNode('!', {}, [], undefined, undefined);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/lib/render.js\n// module id = 16\n// module chunks = 0","import { Observable } from '../observable';\n\n/* Message sending between components, through the DOM */\n\nexport default function Messages(el) {\n  this.el = el;\n}\n\nMessages.prototype.listen = function (messageType) {\n  return this.storeMsg.listen(messageType);\n};\n\nMessages.prototype.send = function (msg) {\n  this.storeMsg.send(msg);\n};\n\nMessages.prototype.sendToParent = function (msg) {\n  _sendToElement(this.el.parentElement, msg);\n};\n\nMessages.prototype.listenAt = function (selectorOrEl) {\n  var el = selectorOrEl instanceof Element ? selectorOrEl : document.querySelector(selectorOrEl);\n\n  if (!el) return;\n\n  var debugName = el.tagName.toLowerCase() + (el.id ? '#' + el.id : '') + (el.className ? '.' + el.className : '');\n\n  return Observable(function (add) {\n    el.__subs__ = el.__subs__ || [];\n    var subs = el.__subs__;\n    subs.push(add);\n\n    return function () {\n      subs.splice(subs.indexOf(add), 1);\n      if (subs.length === 0) el.__subs__ = undefined;\n    };\n  }).named('listenAt(' + debugName + ')');\n};\n\n/** Sends a Message to a DOM Element that will be received by the nearest component */\nexport function _sendToElement(el, msg) {\n  var handled = false;\n\n  while (el && !handled) {\n\n    // Classic component's listen\n    if (el.__comp__) {\n      handled = true;\n      el.__comp__.messages.send(msg);\n    }\n\n    // listenAt\n    if (el.__subs__) {\n      handled = true;\n      el.__subs__.forEach(function (add) {\n        return add(msg);\n      });\n    }\n\n    el = el.parentElement;\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/lib/messages.js\n// module id = 17\n// module chunks = 0","/** Returns whether an object is an Array */\nexport var array = Array.isArray;\n/** Returns whether this object is a function */\nexport function func(obj) {\n    return (typeof obj === 'function');\n}\n/** Returns whether this object is a string */\nexport function string(obj) {\n    return (typeof obj === 'string');\n}\n/** Returns whether this object is a number */\nexport function number(obj) {\n    return (typeof obj === 'number');\n}\n/** Returns whether this object is a boolean */\nexport function boolean(obj) {\n    return (typeof obj === 'boolean');\n}\n/** Returns whether this value is an object (e.g not a primitive: dates, arrays, functions, objects, regexes, `new Number(0)`, and `new String('')) */\nexport function object(obj) {\n    var type = typeof obj;\n    return (type == 'object' || type == 'function');\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/space-lift/es/object/is.js\n// module id = 18\n// module chunks = 0","import { Observable } from '../observable';\nimport Message from '../lib/message';\nimport log from '../lib/log';\n\n/*\r\n * A Store is an Observable that is guaranteed to have an initial value\r\n * and can be modified from the outside by messages.\r\n */\nexport function Store(initialState, registerHandlers) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : empty;\n\n  var store = {};\n\n  // Message handlers for the on(message) syntax\n  var handlers = {};\n  // unsubscribe functions created by the on(observable) syntax\n  var subscriptions = [];\n  // List of the messages that are listened to in order to create observables\n  var listened = {};\n  // Dispatching queue, when a message handler sends additional messages\n  var queue = [];\n  // Stack size while receiving a message\n  var stack = 0;\n\n  var receiving = false;\n\n  var name = options.name;\n  var shouldLog = options.log !== undefined ? options.log : log.message === true;\n  var storeName = name || (registerHandlers.name ? registerHandlers.name + ' store' : 'Store');\n\n  var msg = {\n    send: function send(m) {\n      return store.send(m);\n    }, // Late binding as store.send is not yet defined\n    listen: function listen(message) {\n      var observable = Observable().named(message._name);\n      var obss = listened[message._id];\n      if (!obss) obss = listened[message._id] = [];\n      obss.push(observable);\n      return observable;\n    }\n  };\n\n  function on(src, fn) {\n    if (src._isMessage) {\n      handlers[src._id] = fn;\n    } else {\n      var unsubscribe = src.subscribe(function (val, name) {\n        receive(name, fn, val);\n      });\n\n      subscriptions.push(unsubscribe);\n    }\n  }\n\n  function receive(sourceName, handler, arg) {\n    queue.push({ sourceName: sourceName, handler: handler, arg: arg });\n\n    if (stack >= 10) throw new Error('Infinite loop while handling ' + sourceName);\n    if (receiving) return;\n\n    receiving = true;\n\n    var state = store.state();\n\n    try {\n      while (queue.length) {\n        var _queue$shift = queue.shift(),\n            _sourceName = _queue$shift.sourceName,\n            _handler = _queue$shift.handler,\n            _arg = _queue$shift.arg;\n\n        stack++;\n\n        if (shouldLog) console.log('%c' + _sourceName + ' %creceived by %c' + storeName, 'color: #B31EA6', 'color: black', 'font-weight: bold', 'with', _arg);\n\n        var result = _handler(state, _arg);\n        if (result !== undefined) state = result;\n      }\n    } finally {\n      receiving = false;\n      queue.length = 0;\n      stack = 0;\n    }\n\n    if (state !== store.state() && state !== undefined) store.state(state);\n  }\n\n  store.state = Observable()(initialState).named(storeName + '.state');\n  // Eagerly activate (hot)\n  store.state.subscribe(function (x) {\n    return x;\n  });\n\n  registerHandlers(on, msg);\n\n  store.send = function (message) {\n    var _id = message._id,\n        _name = message._name,\n        payload = message.payload;\n\n    var handler = handlers[_id];\n    var handled = false;\n\n    if (handler) {\n      receive(_name, handler, payload);\n      handled = true;\n    }\n\n    var obss = listened[_id];\n\n    if (obss) {\n      obss.forEach(function (obs) {\n        return obs(payload);\n      });\n      handled = true;\n    }\n\n    if (handled) return;\n\n    var unhandled = handlers[Message.unhandled._id];\n\n    if (unhandled) {\n      receive(Message.unhandled._name, unhandled, message);\n      return;\n    }\n\n    console.warn('Unhandled message \"' + _name + '\" at %c' + storeName, 'font-weight: bold');\n  };\n\n  store.destroy = function () {\n    store.state._subscribers.length = 0;\n    store.state.subscribe = noop;\n    store.send = noop;\n    subscriptions.forEach(function (fn) {\n      return fn();\n    });\n    subscriptions.length = 0;\n  };\n\n  return store;\n}\n\nvar empty = {};\nfunction noop() {}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/store/index.js\n// module id = 19\n// module chunks = 0","\nvar messageId = 1;\n\n/** User-defined component message factory */\nexport default function Message(name) {\n  var _id = messageId++;\n\n  function message(payload) {\n    var result = { _id: _id, _name: name, payload: payload };\n    result.is = messageIs;\n    return result;\n  }\n\n  message._id = _id;\n  message._name = name;\n  message._isMessage = true;\n  message.with = withPayload;\n\n  return message;\n}\n\nfunction withPayload(payload) {\n  return PartiallyAppliedMessage(this, payload);\n}\n\nfunction messageIs(ofType) {\n  return this._id === ofType._id;\n}\n\n/** Creates a new Message type that is partially applied with a payload */\nfunction PartiallyAppliedMessage(message, payload) {\n\n  function result(maybeOtherPayload) {\n    return message(arguments.length !== 0 ? [payload, maybeOtherPayload] : payload);\n  }\n\n  result.type = 'partiallyAppliedMessage';\n  result.payload = payload;\n\n  return result;\n}\n\nMessage.unhandled = Message('unhandled');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/lib/message.js\n// module id = 20\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// A remote messages can be sent and received via a store that maintains state.\n//\n// Each OutgoingMessage is simply sending a websocket message.\n//\n// Each IncomingMessage received updates the state of of the store Eezy-peezy\nconst kaiju_1 = require(\"kaiju\");\nconst immupdate_1 = require(\"immupdate\");\nconst connection_1 = require(\"./connection\");\n// TODO: at some point we want this to be as type safe as possible. We can't quite\n//       achieve that yet - but I want it to work like rocket.\nclass OutgoingMessageInterface {\n}\nexports.OutgoingMessageInterface = OutgoingMessageInterface;\nclass OutgoingMessage extends OutgoingMessageInterface {\n    constructor(name, message) {\n        super();\n        this.name = name;\n        this.message = message;\n    }\n    listen(on, remote) {\n        on(this.message, (state, v) => {\n            let newState = immupdate_1.update(state, v);\n            remote.send(this.name, JSON.stringify(v));\n            return newState;\n        });\n    }\n}\nexports.OutgoingMessage = OutgoingMessage;\nclass IncomingMessageInterface {\n}\nexports.IncomingMessageInterface = IncomingMessageInterface;\nclass IncomingMessage extends IncomingMessageInterface {\n    constructor(name, message) {\n        super();\n        this.name = name;\n        this.message = message;\n    }\n    register(id, connection, store) {\n        connection.register(id, this.name, jsonString => {\n            // TODO: Do some type based conversion/checking first!!\n            store.send(this.message(JSON.parse(jsonString)));\n        });\n    }\n    listen(on) {\n        on(this.message, (state, v) => immupdate_1.update(state, v));\n    }\n}\nexports.IncomingMessage = IncomingMessage;\nclass Remote {\n    constructor(initialState, outgoing, incoming) {\n        this.connection = connection_1.Connection.getInstance();\n        this.id = connection_1.Connection.uniqueId();\n        this.incoming = incoming;\n        this.outgoing = outgoing;\n        this.store = kaiju_1.Store(initialState, (on) => {\n            this.outgoing.forEach((outgoing) => outgoing.listen(on, this));\n            this.incoming.forEach((incoming) => incoming.listen(on));\n        });\n        this.incoming.forEach((incoming) => incoming.register(this.id, this.connection, this.store));\n    }\n    send(name, message) {\n        this.connection.send(this.id, name, message);\n    }\n}\nexports.Remote = Remote;\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/messages.ts","\"use strict\";\n//--------------------------------------------------------------------------------------------------\n// A simple WebSocket wrapped in a singleton so that we have a single point of access to the server.\n//--------------------------------------------------------------------------------------------------\nObject.defineProperty(exports, \"__esModule\", { value: true });\n;\nclass Connection {\n    constructor() {\n        this.unsentMessages = [];\n        this.callbacks = {};\n    }\n    static getInstance() {\n        if (!Connection._instance) {\n            Connection._instance = new Connection();\n        }\n        return Connection._instance;\n    }\n    static uniqueId() {\n        return Connection.idSequence += 1;\n    }\n    connect(url) {\n        this.ws = new WebSocket(url);\n        this.ws.onopen = () => {\n            this.sendUnsentMessages();\n            this.onopen();\n        };\n        this.ws.onclose = () => this.onclose();\n        this.ws.onmessage = (event) => {\n            let message = JSON.parse(event.data);\n            // TODO: validate the incoming json structure is appropriate (Not the args, just the message container)\n            // TODO: much of this id mapping should probably go to the store. We should probably only map\n            //       the id to the store.\n            let key = \"\" + message.id + message.name;\n            let callback = this.callbacks[key];\n            if (callback) {\n                callback(message.args);\n            }\n        };\n    }\n    sendUnsentMessages() {\n        var unsentMessages = this.unsentMessages;\n        this.unsentMessages = [];\n        unsentMessages.forEach((msg) => this.send(msg.id, msg.name, msg.args));\n    }\n    onopen() { }\n    onclose() { }\n    register(id, methodName, callback) {\n        let key = \"\" + id + methodName;\n        this.callbacks[key] = callback;\n    }\n    send(id, name, args) {\n        let message = { id: id, name: name, args: args };\n        if (!this.ws) {\n            this.unsentMessages.push(message);\n        }\n        else {\n            this.ws.send(JSON.stringify(message));\n        }\n    }\n}\nConnection._instance = undefined;\nConnection.idSequence = 0;\nexports.Connection = Connection;\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/connection.ts","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar board_1 = require(\"./board\");\nvar fen_1 = require(\"./fen\");\nfunction configure(state, config) {\n    if (config.movable && config.movable.dests)\n        state.movable.dests = undefined;\n    merge(state, config);\n    if (config.fen) {\n        state.pieces = fen_1.read(config.fen);\n        state.drawable.shapes = [];\n    }\n    if (config.hasOwnProperty('check'))\n        board_1.setCheck(state, config.check || false);\n    if (config.hasOwnProperty('lastMove') && !config.lastMove)\n        state.lastMove = undefined;\n    else if (config.lastMove)\n        state.lastMove = config.lastMove;\n    if (state.selected)\n        board_1.setSelected(state, state.selected);\n    if (!state.animation.duration || state.animation.duration < 100)\n        state.animation.enabled = false;\n    if (!state.movable.rookCastle && state.movable.dests) {\n        var rank_1 = state.movable.color === 'white' ? 1 : 8;\n        var kingStartPos = 'e' + rank_1;\n        var dests_1 = state.movable.dests[kingStartPos];\n        if (!dests_1 || state.pieces[kingStartPos].role !== 'king')\n            return;\n        state.movable.dests[kingStartPos] = dests_1.filter(function (d) {\n            return !((d === 'a' + rank_1) && dests_1.indexOf('c' + rank_1) !== -1) &&\n                !((d === 'h' + rank_1) && dests_1.indexOf('g' + rank_1) !== -1);\n        });\n    }\n}\nexports.configure = configure;\n;\nfunction merge(base, extend) {\n    for (var key in extend) {\n        if (isObject(base[key]) && isObject(extend[key]))\n            merge(base[key], extend[key]);\n        else\n            base[key] = extend[key];\n    }\n}\nfunction isObject(o) {\n    return typeof o === 'object';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/config.js\n// module id = 23\n// module chunks = 0","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util = require(\"./util\");\nfunction anim(mutation, state) {\n    return state.animation.enabled ? animate(mutation, state) : render(mutation, state);\n}\nexports.anim = anim;\nfunction render(mutation, state) {\n    var result = mutation(state);\n    state.dom.redraw();\n    return result;\n}\nexports.render = render;\nfunction makePiece(key, piece) {\n    return {\n        key: key,\n        pos: util.key2pos(key),\n        piece: piece\n    };\n}\nfunction closer(piece, pieces) {\n    return pieces.sort(function (p1, p2) {\n        return util.distanceSq(piece.pos, p1.pos) - util.distanceSq(piece.pos, p2.pos);\n    })[0];\n}\nfunction computePlan(prevPieces, current) {\n    var anims = {}, animedOrigs = [], fadings = {}, missings = [], news = [], prePieces = {};\n    var curP, preP, i, vector;\n    for (i in prevPieces) {\n        prePieces[i] = makePiece(i, prevPieces[i]);\n    }\n    for (var _i = 0, _a = util.allKeys; _i < _a.length; _i++) {\n        var key = _a[_i];\n        curP = current.pieces[key];\n        preP = prePieces[key];\n        if (curP) {\n            if (preP) {\n                if (!util.samePiece(curP, preP.piece)) {\n                    missings.push(preP);\n                    news.push(makePiece(key, curP));\n                }\n            }\n            else\n                news.push(makePiece(key, curP));\n        }\n        else if (preP)\n            missings.push(preP);\n    }\n    news.forEach(function (newP) {\n        preP = closer(newP, missings.filter(function (p) { return util.samePiece(newP.piece, p.piece); }));\n        if (preP) {\n            vector = [preP.pos[0] - newP.pos[0], preP.pos[1] - newP.pos[1]];\n            anims[newP.key] = vector.concat(vector);\n            animedOrigs.push(preP.key);\n        }\n    });\n    missings.forEach(function (p) {\n        if (!util.containsX(animedOrigs, p.key) &&\n            !(current.items ? current.items(p.pos, p.key) : false))\n            fadings[p.key] = p.piece;\n    });\n    return {\n        anims: anims,\n        fadings: fadings\n    };\n}\nvar perf = performance !== undefined && performance.now !== undefined ?\n    performance : Date;\nfunction step(state, now) {\n    var cur = state.animation.current;\n    if (cur === undefined) {\n        if (!state.dom.destroyed)\n            state.dom.redrawNow();\n        return;\n    }\n    var rest = 1 - (now - cur.start) * cur.frequency;\n    if (rest <= 0) {\n        state.animation.current = undefined;\n        state.dom.redrawNow();\n    }\n    else {\n        var ease = easing(rest);\n        for (var i in cur.plan.anims) {\n            var cfg = cur.plan.anims[i];\n            cfg[2] = cfg[0] * ease;\n            cfg[3] = cfg[1] * ease;\n        }\n        state.dom.redrawNow(true);\n        util.raf(function (now) {\n            if (now === void 0) { now = perf.now(); }\n            return step(state, now);\n        });\n    }\n}\nfunction animate(mutation, state) {\n    var prevPieces = __assign({}, state.pieces);\n    var result = mutation(state);\n    var plan = computePlan(prevPieces, state);\n    if (!isObjectEmpty(plan.anims) || !isObjectEmpty(plan.fadings)) {\n        var alreadyRunning = state.animation.current && state.animation.current.start;\n        state.animation.current = {\n            start: perf.now(),\n            frequency: 1 / state.animation.duration,\n            plan: plan\n        };\n        if (!alreadyRunning)\n            step(state, perf.now());\n    }\n    else {\n        state.dom.redraw();\n    }\n    return result;\n}\nfunction isObjectEmpty(o) {\n    for (var _ in o)\n        return false;\n    return true;\n}\nfunction easing(t) {\n    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/anim.js\n// module id = 24\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar board = require(\"./board\");\nvar util = require(\"./util\");\nvar draw_1 = require(\"./draw\");\nvar anim_1 = require(\"./anim\");\nfunction start(s, e) {\n    if (e.button !== undefined && e.button !== 0)\n        return;\n    if (e.touches && e.touches.length > 1)\n        return;\n    e.preventDefault();\n    var asWhite = s.orientation === 'white', bounds = s.dom.bounds(), position = util.eventPosition(e), orig = board.getKeyAtDomPos(position, asWhite, bounds);\n    if (!orig)\n        return;\n    var piece = s.pieces[orig];\n    var previouslySelected = s.selected;\n    if (!previouslySelected && s.drawable.enabled && (s.drawable.eraseOnClick || (!piece || piece.color !== s.turnColor)))\n        draw_1.clear(s);\n    var hadPremove = !!s.premovable.current;\n    var hadPredrop = !!s.predroppable.current;\n    s.stats.ctrlKey = e.ctrlKey;\n    if (s.selected && board.canMove(s, s.selected, orig)) {\n        anim_1.anim(function (state) { return board.selectSquare(state, orig); }, s);\n    }\n    else {\n        board.selectSquare(s, orig);\n    }\n    var stillSelected = s.selected === orig;\n    var element = pieceElementByKey(s, orig);\n    if (piece && element && stillSelected && board.isDraggable(s, orig)) {\n        var squareBounds = computeSquareBounds(orig, asWhite, bounds);\n        s.draggable.current = {\n            orig: orig,\n            origPos: util.key2pos(orig),\n            piece: piece,\n            rel: position,\n            epos: position,\n            pos: [0, 0],\n            dec: s.draggable.centerPiece ? [\n                position[0] - (squareBounds.left + squareBounds.width / 2),\n                position[1] - (squareBounds.top + squareBounds.height / 2)\n            ] : [0, 0],\n            started: s.draggable.autoDistance && s.stats.dragged,\n            element: element,\n            previouslySelected: previouslySelected,\n            originTarget: e.target\n        };\n        element.cgDragging = true;\n        element.classList.add('dragging');\n        var ghost = s.dom.elements.ghost;\n        if (ghost) {\n            ghost.className = \"ghost \" + piece.color + \" \" + piece.role;\n            util.translateAbs(ghost, util.posToTranslateAbs(bounds)(util.key2pos(orig), asWhite));\n        }\n        processDrag(s);\n    }\n    else {\n        if (hadPremove)\n            board.unsetPremove(s);\n        if (hadPredrop)\n            board.unsetPredrop(s);\n    }\n    s.dom.redraw();\n}\nexports.start = start;\nfunction dragNewPiece(s, piece, e, force) {\n    var key = 'a0';\n    s.pieces[key] = piece;\n    s.dom.redraw();\n    var position = util.eventPosition(e), asWhite = s.orientation === 'white', bounds = s.dom.bounds(), squareBounds = computeSquareBounds(key, asWhite, bounds);\n    var rel = [\n        (asWhite ? 0 : 7) * squareBounds.width + bounds.left,\n        (asWhite ? 8 : -1) * squareBounds.height + bounds.top\n    ];\n    s.draggable.current = {\n        orig: key,\n        origPos: util.key2pos(key),\n        piece: piece,\n        rel: rel,\n        epos: position,\n        pos: [position[0] - rel[0], position[1] - rel[1]],\n        dec: [-squareBounds.width / 2, -squareBounds.height / 2],\n        started: true,\n        element: function () { return pieceElementByKey(s, key); },\n        originTarget: e.target,\n        newPiece: true,\n        force: force || false\n    };\n    processDrag(s);\n}\nexports.dragNewPiece = dragNewPiece;\nfunction processDrag(s) {\n    util.raf(function () {\n        var cur = s.draggable.current;\n        if (!cur)\n            return;\n        if (s.animation.current && s.animation.current.plan.anims[cur.orig])\n            s.animation.current = undefined;\n        var origPiece = s.pieces[cur.orig];\n        if (!origPiece || !util.samePiece(origPiece, cur.piece))\n            cancel(s);\n        else {\n            if (!cur.started && util.distanceSq(cur.epos, cur.rel) >= Math.pow(s.draggable.distance, 2))\n                cur.started = true;\n            if (cur.started) {\n                if (typeof cur.element === 'function') {\n                    var found = cur.element();\n                    if (!found)\n                        return;\n                    cur.element = found;\n                    cur.element.cgDragging = true;\n                    cur.element.classList.add('dragging');\n                }\n                var asWhite = s.orientation === 'white', bounds = s.dom.bounds();\n                cur.pos = [\n                    cur.epos[0] - cur.rel[0],\n                    cur.epos[1] - cur.rel[1]\n                ];\n                cur.over = board.getKeyAtDomPos(cur.epos, asWhite, bounds);\n                var translation = util.posToTranslateAbs(bounds)(cur.origPos, asWhite);\n                translation[0] += cur.pos[0] + cur.dec[0];\n                translation[1] += cur.pos[1] + cur.dec[1];\n                util.translateAbs(cur.element, translation);\n                var overEl = s.dom.elements.over;\n                if (overEl && cur.over && cur.over !== cur.overPrev) {\n                    var dests = s.movable.dests;\n                    if (s.movable.free ||\n                        util.containsX(dests && dests[cur.orig], cur.over) ||\n                        util.containsX(s.premovable.dests, cur.over)) {\n                        var pos = util.key2pos(cur.over), vector = [\n                            (asWhite ? pos[0] - 1 : 8 - pos[0]) * bounds.width / 8,\n                            (asWhite ? 8 - pos[1] : pos[1] - 1) * bounds.height / 8\n                        ];\n                        util.translateAbs(overEl, vector);\n                    }\n                    else {\n                        util.translateAway(overEl);\n                    }\n                    cur.overPrev = cur.over;\n                }\n            }\n        }\n        processDrag(s);\n    });\n}\nfunction move(s, e) {\n    if (s.draggable.current && (!e.touches || e.touches.length < 2)) {\n        s.draggable.current.epos = util.eventPosition(e);\n    }\n}\nexports.move = move;\nfunction end(s, e) {\n    var cur = s.draggable.current;\n    if (!cur)\n        return;\n    if (e.type === 'touchend' && cur && cur.originTarget !== e.target && !cur.newPiece) {\n        s.draggable.current = undefined;\n        return;\n    }\n    board.unsetPremove(s);\n    board.unsetPredrop(s);\n    var eventPos = util.eventPosition(e) || cur.epos;\n    var dest = board.getKeyAtDomPos(eventPos, s.orientation === 'white', s.dom.bounds());\n    if (dest && cur.started) {\n        if (cur.newPiece)\n            board.dropNewPiece(s, cur.orig, dest, cur.force);\n        else {\n            s.stats.ctrlKey = e.ctrlKey;\n            if (board.userMove(s, cur.orig, dest))\n                s.stats.dragged = true;\n        }\n    }\n    else if (cur.newPiece) {\n        delete s.pieces[cur.orig];\n    }\n    else if (s.draggable.deleteOnDropOff) {\n        delete s.pieces[cur.orig];\n        board.callUserFunction(s.events.change);\n    }\n    if (cur && cur.orig === cur.previouslySelected && (cur.orig === dest || !dest))\n        board.unselect(s);\n    else if (!s.selectable.enabled)\n        board.unselect(s);\n    removeDragElements(s);\n    s.draggable.current = undefined;\n    s.dom.redraw();\n}\nexports.end = end;\nfunction cancel(s) {\n    var cur = s.draggable.current;\n    if (cur) {\n        if (cur.newPiece)\n            delete s.pieces[cur.orig];\n        s.draggable.current = undefined;\n        board.unselect(s);\n        removeDragElements(s);\n        s.dom.redraw();\n    }\n}\nexports.cancel = cancel;\nfunction removeDragElements(s) {\n    var e = s.dom.elements;\n    if (e.over)\n        util.translateAway(e.over);\n    if (e.ghost)\n        util.translateAway(e.ghost);\n}\nfunction computeSquareBounds(key, asWhite, bounds) {\n    var pos = util.key2pos(key);\n    if (!asWhite) {\n        pos[0] = 9 - pos[0];\n        pos[1] = 9 - pos[1];\n    }\n    return {\n        left: bounds.left + bounds.width * (pos[0] - 1) / 8,\n        top: bounds.top + bounds.height * (8 - pos[1]) / 8,\n        width: bounds.width / 8,\n        height: bounds.height / 8\n    };\n}\nfunction pieceElementByKey(s, key) {\n    var el = s.dom.elements.board.firstChild;\n    while (el) {\n        if (el.cgKey === key && el.tagName === 'PIECE')\n            return el;\n        el = el.nextSibling;\n    }\n    return undefined;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/drag.js\n// module id = 25\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar board_1 = require(\"./board\");\nvar util_1 = require(\"./util\");\nvar brushes = ['green', 'red', 'blue', 'yellow'];\nfunction start(state, e) {\n    if (e.touches && e.touches.length > 1)\n        return;\n    e.stopPropagation();\n    e.preventDefault();\n    board_1.cancelMove(state);\n    var position = util_1.eventPosition(e);\n    var orig = board_1.getKeyAtDomPos(position, state.orientation === 'white', state.dom.bounds());\n    if (!orig)\n        return;\n    state.drawable.current = {\n        orig: orig,\n        dest: orig,\n        pos: position,\n        brush: eventBrush(e)\n    };\n    processDraw(state);\n}\nexports.start = start;\nfunction processDraw(state) {\n    util_1.raf(function () {\n        var cur = state.drawable.current;\n        if (cur) {\n            var dest = board_1.getKeyAtDomPos(cur.pos, state.orientation === 'white', state.dom.bounds());\n            var newDest = (cur.orig === dest) ? undefined : dest;\n            if (newDest !== cur.dest) {\n                cur.dest = newDest;\n                state.dom.redrawNow();\n            }\n            processDraw(state);\n        }\n    });\n}\nexports.processDraw = processDraw;\nfunction move(state, e) {\n    if (state.drawable.current)\n        state.drawable.current.pos = util_1.eventPosition(e);\n}\nexports.move = move;\nfunction end(state) {\n    var cur = state.drawable.current;\n    if (!cur)\n        return;\n    if (cur.dest && cur.dest !== cur.orig)\n        addLine(state.drawable, cur, cur.dest);\n    else\n        addCircle(state.drawable, cur);\n    cancel(state);\n}\nexports.end = end;\nfunction cancel(state) {\n    if (state.drawable.current) {\n        state.drawable.current = undefined;\n        state.dom.redraw();\n    }\n}\nexports.cancel = cancel;\nfunction clear(state) {\n    if (state.drawable.shapes.length) {\n        state.drawable.shapes = [];\n        state.dom.redraw();\n        onChange(state.drawable);\n    }\n}\nexports.clear = clear;\nfunction eventBrush(e) {\n    var a = e.shiftKey && util_1.isRightButton(e) ? 1 : 0;\n    var b = e.altKey ? 2 : 0;\n    return brushes[a + b];\n}\nfunction not(f) {\n    return function (x) { return !f(x); };\n}\nfunction addCircle(drawable, cur) {\n    var orig = cur.orig;\n    var sameCircle = function (s) { return s.orig === orig && !s.dest; };\n    var similar = drawable.shapes.filter(sameCircle)[0];\n    if (similar)\n        drawable.shapes = drawable.shapes.filter(not(sameCircle));\n    if (!similar || similar.brush !== cur.brush)\n        drawable.shapes.push({\n            brush: cur.brush,\n            orig: orig\n        });\n    onChange(drawable);\n}\nfunction addLine(drawable, cur, dest) {\n    var orig = cur.orig;\n    var sameLine = function (s) {\n        return !!s.dest && s.orig === orig && s.dest === dest;\n    };\n    var exists = drawable.shapes.filter(sameLine).length > 0;\n    if (exists)\n        drawable.shapes = drawable.shapes.filter(not(sameLine));\n    else\n        drawable.shapes.push({\n            brush: cur.brush,\n            orig: orig,\n            dest: dest\n        });\n    onChange(drawable);\n}\nfunction onChange(drawable) {\n    if (drawable.onChange)\n        drawable.onChange(drawable.shapes);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/draw.js\n// module id = 26\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nfunction createElement(tagName) {\n    return document.createElementNS('http://www.w3.org/2000/svg', tagName);\n}\nexports.createElement = createElement;\nvar isTrident;\nfunction renderSvg(state, root) {\n    var d = state.drawable, cur = d.current, arrowDests = {};\n    d.shapes.concat(d.autoShapes).concat(cur ? [cur] : []).forEach(function (s) {\n        if (s.dest)\n            arrowDests[s.dest] = (arrowDests[s.dest] || 0) + 1;\n    });\n    var shapes = d.shapes.concat(d.autoShapes).map(function (s) {\n        return {\n            shape: s,\n            current: false,\n            hash: shapeHash(s, arrowDests, false)\n        };\n    });\n    if (cur)\n        shapes.push({\n            shape: cur,\n            current: true,\n            hash: shapeHash(cur, arrowDests, true)\n        });\n    var fullHash = shapes.map(function (sc) { return sc.hash; }).join('');\n    if (fullHash === state.drawable.prevSvgHash)\n        return;\n    state.drawable.prevSvgHash = fullHash;\n    var defsEl = root.firstChild;\n    syncDefs(d, shapes, defsEl);\n    syncShapes(state, shapes, d.brushes, arrowDests, root, defsEl);\n}\nexports.renderSvg = renderSvg;\nfunction syncDefs(d, shapes, defsEl) {\n    var brushes = {};\n    var brush;\n    shapes.forEach(function (s) {\n        if (s.shape.dest) {\n            brush = d.brushes[s.shape.brush];\n            if (s.shape.modifiers)\n                brush = makeCustomBrush(brush, s.shape.modifiers);\n            brushes[brush.key] = brush;\n        }\n    });\n    var keysInDom = {};\n    var el = defsEl.firstChild;\n    while (el) {\n        keysInDom[el.getAttribute('cgKey')] = true;\n        el = el.nextSibling;\n    }\n    for (var key in brushes) {\n        if (!keysInDom[key])\n            defsEl.appendChild(renderMarker(brushes[key]));\n    }\n}\nfunction syncShapes(state, shapes, brushes, arrowDests, root, defsEl) {\n    if (isTrident === undefined)\n        isTrident = util_1.computeIsTrident();\n    var bounds = state.dom.bounds(), hashesInDom = {}, toRemove = [];\n    shapes.forEach(function (sc) { hashesInDom[sc.hash] = false; });\n    var el = defsEl.nextSibling, elHash;\n    while (el) {\n        elHash = el.getAttribute('cgHash');\n        if (hashesInDom.hasOwnProperty(elHash))\n            hashesInDom[elHash] = true;\n        else\n            toRemove.push(el);\n        el = el.nextSibling;\n    }\n    toRemove.forEach(function (el) { return root.removeChild(el); });\n    shapes.forEach(function (sc) {\n        if (!hashesInDom[sc.hash])\n            root.appendChild(renderShape(state, sc, brushes, arrowDests, bounds));\n    });\n}\nfunction shapeHash(_a, arrowDests, current) {\n    var orig = _a.orig, dest = _a.dest, brush = _a.brush, piece = _a.piece, modifiers = _a.modifiers;\n    return [current, orig, dest, brush, dest && arrowDests[dest],\n        piece && pieceHash(piece),\n        modifiers && modifiersHash(modifiers)\n    ].filter(function (x) { return x; }).join('');\n}\nfunction pieceHash(piece) {\n    return [piece.color, piece.role, piece.scale].filter(function (x) { return x; }).join('');\n}\nfunction modifiersHash(m) {\n    return '' + (m.lineWidth || '');\n}\nfunction renderShape(state, _a, brushes, arrowDests, bounds) {\n    var shape = _a.shape, current = _a.current, hash = _a.hash;\n    var el;\n    if (shape.piece)\n        el = renderPiece(state.drawable.pieces.baseUrl, orient(util_1.key2pos(shape.orig), state.orientation), shape.piece, bounds);\n    else {\n        var orig = orient(util_1.key2pos(shape.orig), state.orientation);\n        if (shape.orig && shape.dest) {\n            var brush = brushes[shape.brush];\n            if (shape.modifiers)\n                brush = makeCustomBrush(brush, shape.modifiers);\n            el = renderArrow(brush, orig, orient(util_1.key2pos(shape.dest), state.orientation), current, arrowDests[shape.dest] > 1, bounds);\n        }\n        else\n            el = renderCircle(brushes[shape.brush], orig, current, bounds);\n    }\n    el.setAttribute('cgHash', hash);\n    return el;\n}\nfunction renderCircle(brush, pos, current, bounds) {\n    var o = pos2px(pos, bounds), width = circleWidth(current, bounds), radius = (bounds.width + bounds.height) / 32;\n    return setAttributes(createElement('circle'), {\n        stroke: brush.color,\n        'stroke-width': width,\n        fill: 'none',\n        opacity: opacity(brush, current),\n        cx: o[0],\n        cy: o[1],\n        r: radius - width / 2\n    });\n}\nfunction renderArrow(brush, orig, dest, current, shorten, bounds) {\n    var m = arrowMargin(bounds, shorten && !current), a = pos2px(orig, bounds), b = pos2px(dest, bounds), dx = b[0] - a[0], dy = b[1] - a[1], angle = Math.atan2(dy, dx), xo = Math.cos(angle) * m, yo = Math.sin(angle) * m;\n    return setAttributes(createElement('line'), {\n        stroke: brush.color,\n        'stroke-width': lineWidth(brush, current, bounds),\n        'stroke-linecap': 'round',\n        'marker-end': isTrident ? undefined : 'url(#arrowhead-' + brush.key + ')',\n        opacity: opacity(brush, current),\n        x1: a[0],\n        y1: a[1],\n        x2: b[0] - xo,\n        y2: b[1] - yo\n    });\n}\nfunction renderPiece(baseUrl, pos, piece, bounds) {\n    var o = pos2px(pos, bounds), size = bounds.width / 8 * (piece.scale || 1), name = piece.color[0] + (piece.role === 'knight' ? 'n' : piece.role[0]).toUpperCase();\n    return setAttributes(createElement('image'), {\n        className: piece.role + \" \" + piece.color,\n        x: o[0] - size / 2,\n        y: o[1] - size / 2,\n        width: size,\n        height: size,\n        href: baseUrl + name + '.svg'\n    });\n}\nfunction renderMarker(brush) {\n    var marker = setAttributes(createElement('marker'), {\n        id: 'arrowhead-' + brush.key,\n        orient: 'auto',\n        markerWidth: 4,\n        markerHeight: 8,\n        refX: 2.05,\n        refY: 2.01\n    });\n    marker.appendChild(setAttributes(createElement('path'), {\n        d: 'M0,0 V4 L3,2 Z',\n        fill: brush.color\n    }));\n    marker.setAttribute('cgKey', brush.key);\n    return marker;\n}\nfunction setAttributes(el, attrs) {\n    for (var key in attrs)\n        el.setAttribute(key, attrs[key]);\n    return el;\n}\nfunction orient(pos, color) {\n    return color === 'white' ? pos : [9 - pos[0], 9 - pos[1]];\n}\nfunction makeCustomBrush(base, modifiers) {\n    var brush = {\n        color: base.color,\n        opacity: Math.round(base.opacity * 10) / 10,\n        lineWidth: Math.round(modifiers.lineWidth || base.lineWidth)\n    };\n    brush.key = [base.key, modifiers.lineWidth].filter(function (x) { return x; }).join('');\n    return brush;\n}\nfunction circleWidth(current, bounds) {\n    return (current ? 3 : 4) / 512 * bounds.width;\n}\nfunction lineWidth(brush, current, bounds) {\n    return (brush.lineWidth || 10) * (current ? 0.85 : 1) / 512 * bounds.width;\n}\nfunction opacity(brush, current) {\n    return (brush.opacity || 1) * (current ? 0.9 : 1);\n}\nfunction arrowMargin(bounds, shorten) {\n    return isTrident ? 0 : ((shorten ? 20 : 10) / 512 * bounds.width);\n}\nfunction pos2px(pos, bounds) {\n    return [(pos[0] - 0.5) * bounds.width / 8, (8.5 - pos[1]) * bounds.height / 8];\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/svg.js\n// module id = 27\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// NOTE: this and the package.json have to be manually kept in sync\n// TODO: figure out an automated way to do that. :/\nconst VERSION = \"0.1.0\";\nexports.default = VERSION;\n\n\n\n// WEBPACK FOOTER //\n// ./src/version.ts","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst kaiju_1 = require(\"kaiju\");\nconst class_1 = require(\"snabbdom/modules/class\");\nconst attributes_1 = require(\"snabbdom/modules/attributes\");\nconst style_1 = require(\"snabbdom/modules/style\");\nconst eventlisteners_1 = require(\"snabbdom/modules/eventlisteners\");\nconst app_1 = require(\"./app\");\nfunction run(element) {\n    kaiju_1.startApp({\n        app: app_1.default(),\n        snabbdomModules: [class_1.default, attributes_1.default, style_1.default, eventlisteners_1.default],\n        elm: element,\n        replaceElm: true\n    });\n}\nvar element = document.getElementById(\"app\");\nif (element === null) {\n    console.error(\"Unable to mount app\");\n}\nelse {\n    run(element);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vnode_1 = require(\"./vnode\");\nvar is = require(\"./is\");\nvar htmldomapi_1 = require(\"./htmldomapi\");\nfunction isUndef(s) { return s === undefined; }\nfunction isDef(s) { return s !== undefined; }\nvar emptyNode = vnode_1.default('', {}, [], undefined, undefined);\nfunction sameVnode(vnode1, vnode2) {\n    return vnode1.key === vnode2.key && vnode1.sel === vnode2.sel;\n}\nfunction isVnode(vnode) {\n    return vnode.sel !== undefined;\n}\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n    var i, map = {}, key, ch;\n    for (i = beginIdx; i <= endIdx; ++i) {\n        ch = children[i];\n        if (ch != null) {\n            key = ch.key;\n            if (key !== undefined)\n                map[key] = i;\n        }\n    }\n    return map;\n}\nvar hooks = ['create', 'update', 'remove', 'destroy', 'pre', 'post'];\nvar h_1 = require(\"./h\");\nexports.h = h_1.h;\nvar thunk_1 = require(\"./thunk\");\nexports.thunk = thunk_1.thunk;\nfunction init(modules, domApi) {\n    var i, j, cbs = {};\n    var api = domApi !== undefined ? domApi : htmldomapi_1.default;\n    for (i = 0; i < hooks.length; ++i) {\n        cbs[hooks[i]] = [];\n        for (j = 0; j < modules.length; ++j) {\n            var hook = modules[j][hooks[i]];\n            if (hook !== undefined) {\n                cbs[hooks[i]].push(hook);\n            }\n        }\n    }\n    function emptyNodeAt(elm) {\n        var id = elm.id ? '#' + elm.id : '';\n        var c = elm.className ? '.' + elm.className.split(' ').join('.') : '';\n        return vnode_1.default(api.tagName(elm).toLowerCase() + id + c, {}, [], undefined, elm);\n    }\n    function createRmCb(childElm, listeners) {\n        return function rmCb() {\n            if (--listeners === 0) {\n                var parent_1 = api.parentNode(childElm);\n                api.removeChild(parent_1, childElm);\n            }\n        };\n    }\n    function createElm(vnode, insertedVnodeQueue) {\n        var i, data = vnode.data;\n        if (data !== undefined) {\n            if (isDef(i = data.hook) && isDef(i = i.init)) {\n                i(vnode);\n                data = vnode.data;\n            }\n        }\n        var children = vnode.children, sel = vnode.sel;\n        if (sel === '!') {\n            if (isUndef(vnode.text)) {\n                vnode.text = '';\n            }\n            vnode.elm = api.createComment(vnode.text);\n        }\n        else if (sel !== undefined) {\n            // Parse selector\n            var hashIdx = sel.indexOf('#');\n            var dotIdx = sel.indexOf('.', hashIdx);\n            var hash = hashIdx > 0 ? hashIdx : sel.length;\n            var dot = dotIdx > 0 ? dotIdx : sel.length;\n            var tag = hashIdx !== -1 || dotIdx !== -1 ? sel.slice(0, Math.min(hash, dot)) : sel;\n            var elm = vnode.elm = isDef(data) && isDef(i = data.ns) ? api.createElementNS(i, tag)\n                : api.createElement(tag);\n            if (hash < dot)\n                elm.setAttribute('id', sel.slice(hash + 1, dot));\n            if (dotIdx > 0)\n                elm.setAttribute('class', sel.slice(dot + 1).replace(/\\./g, ' '));\n            for (i = 0; i < cbs.create.length; ++i)\n                cbs.create[i](emptyNode, vnode);\n            if (is.array(children)) {\n                for (i = 0; i < children.length; ++i) {\n                    var ch = children[i];\n                    if (ch != null) {\n                        api.appendChild(elm, createElm(ch, insertedVnodeQueue));\n                    }\n                }\n            }\n            else if (is.primitive(vnode.text)) {\n                api.appendChild(elm, api.createTextNode(vnode.text));\n            }\n            i = vnode.data.hook; // Reuse variable\n            if (isDef(i)) {\n                if (i.create)\n                    i.create(emptyNode, vnode);\n                if (i.insert)\n                    insertedVnodeQueue.push(vnode);\n            }\n        }\n        else {\n            vnode.elm = api.createTextNode(vnode.text);\n        }\n        return vnode.elm;\n    }\n    function addVnodes(parentElm, before, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n        for (; startIdx <= endIdx; ++startIdx) {\n            var ch = vnodes[startIdx];\n            if (ch != null) {\n                api.insertBefore(parentElm, createElm(ch, insertedVnodeQueue), before);\n            }\n        }\n    }\n    function invokeDestroyHook(vnode) {\n        var i, j, data = vnode.data;\n        if (data !== undefined) {\n            if (isDef(i = data.hook) && isDef(i = i.destroy))\n                i(vnode);\n            for (i = 0; i < cbs.destroy.length; ++i)\n                cbs.destroy[i](vnode);\n            if (vnode.children !== undefined) {\n                for (j = 0; j < vnode.children.length; ++j) {\n                    i = vnode.children[j];\n                    if (i != null && typeof i !== \"string\") {\n                        invokeDestroyHook(i);\n                    }\n                }\n            }\n        }\n    }\n    function removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n        for (; startIdx <= endIdx; ++startIdx) {\n            var i_1 = void 0, listeners = void 0, rm = void 0, ch = vnodes[startIdx];\n            if (ch != null) {\n                if (isDef(ch.sel)) {\n                    invokeDestroyHook(ch);\n                    listeners = cbs.remove.length + 1;\n                    rm = createRmCb(ch.elm, listeners);\n                    for (i_1 = 0; i_1 < cbs.remove.length; ++i_1)\n                        cbs.remove[i_1](ch, rm);\n                    if (isDef(i_1 = ch.data) && isDef(i_1 = i_1.hook) && isDef(i_1 = i_1.remove)) {\n                        i_1(ch, rm);\n                    }\n                    else {\n                        rm();\n                    }\n                }\n                else {\n                    api.removeChild(parentElm, ch.elm);\n                }\n            }\n        }\n    }\n    function updateChildren(parentElm, oldCh, newCh, insertedVnodeQueue) {\n        var oldStartIdx = 0, newStartIdx = 0;\n        var oldEndIdx = oldCh.length - 1;\n        var oldStartVnode = oldCh[0];\n        var oldEndVnode = oldCh[oldEndIdx];\n        var newEndIdx = newCh.length - 1;\n        var newStartVnode = newCh[0];\n        var newEndVnode = newCh[newEndIdx];\n        var oldKeyToIdx;\n        var idxInOld;\n        var elmToMove;\n        var before;\n        while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n            if (oldStartVnode == null) {\n                oldStartVnode = oldCh[++oldStartIdx]; // Vnode might have been moved left\n            }\n            else if (oldEndVnode == null) {\n                oldEndVnode = oldCh[--oldEndIdx];\n            }\n            else if (newStartVnode == null) {\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else if (newEndVnode == null) {\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldStartVnode, newStartVnode)) {\n                patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);\n                oldStartVnode = oldCh[++oldStartIdx];\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else if (sameVnode(oldEndVnode, newEndVnode)) {\n                patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);\n                oldEndVnode = oldCh[--oldEndIdx];\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldStartVnode, newEndVnode)) {\n                patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);\n                api.insertBefore(parentElm, oldStartVnode.elm, api.nextSibling(oldEndVnode.elm));\n                oldStartVnode = oldCh[++oldStartIdx];\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldEndVnode, newStartVnode)) {\n                patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);\n                api.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n                oldEndVnode = oldCh[--oldEndIdx];\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else {\n                if (oldKeyToIdx === undefined) {\n                    oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n                }\n                idxInOld = oldKeyToIdx[newStartVnode.key];\n                if (isUndef(idxInOld)) {\n                    api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n                    newStartVnode = newCh[++newStartIdx];\n                }\n                else {\n                    elmToMove = oldCh[idxInOld];\n                    if (elmToMove.sel !== newStartVnode.sel) {\n                        api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n                    }\n                    else {\n                        patchVnode(elmToMove, newStartVnode, insertedVnodeQueue);\n                        oldCh[idxInOld] = undefined;\n                        api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);\n                    }\n                    newStartVnode = newCh[++newStartIdx];\n                }\n            }\n        }\n        if (oldStartIdx > oldEndIdx) {\n            before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;\n            addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n        }\n        else if (newStartIdx > newEndIdx) {\n            removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n        }\n    }\n    function patchVnode(oldVnode, vnode, insertedVnodeQueue) {\n        var i, hook;\n        if (isDef(i = vnode.data) && isDef(hook = i.hook) && isDef(i = hook.prepatch)) {\n            i(oldVnode, vnode);\n        }\n        var elm = vnode.elm = oldVnode.elm;\n        var oldCh = oldVnode.children;\n        var ch = vnode.children;\n        if (oldVnode === vnode)\n            return;\n        if (vnode.data !== undefined) {\n            for (i = 0; i < cbs.update.length; ++i)\n                cbs.update[i](oldVnode, vnode);\n            i = vnode.data.hook;\n            if (isDef(i) && isDef(i = i.update))\n                i(oldVnode, vnode);\n        }\n        if (isUndef(vnode.text)) {\n            if (isDef(oldCh) && isDef(ch)) {\n                if (oldCh !== ch)\n                    updateChildren(elm, oldCh, ch, insertedVnodeQueue);\n            }\n            else if (isDef(ch)) {\n                if (isDef(oldVnode.text))\n                    api.setTextContent(elm, '');\n                addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n            }\n            else if (isDef(oldCh)) {\n                removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n            }\n            else if (isDef(oldVnode.text)) {\n                api.setTextContent(elm, '');\n            }\n        }\n        else if (oldVnode.text !== vnode.text) {\n            api.setTextContent(elm, vnode.text);\n        }\n        if (isDef(hook) && isDef(i = hook.postpatch)) {\n            i(oldVnode, vnode);\n        }\n    }\n    return function patch(oldVnode, vnode) {\n        var i, elm, parent;\n        var insertedVnodeQueue = [];\n        for (i = 0; i < cbs.pre.length; ++i)\n            cbs.pre[i]();\n        if (!isVnode(oldVnode)) {\n            oldVnode = emptyNodeAt(oldVnode);\n        }\n        if (sameVnode(oldVnode, vnode)) {\n            patchVnode(oldVnode, vnode, insertedVnodeQueue);\n        }\n        else {\n            elm = oldVnode.elm;\n            parent = api.parentNode(elm);\n            createElm(vnode, insertedVnodeQueue);\n            if (parent !== null) {\n                api.insertBefore(parent, vnode.elm, api.nextSibling(elm));\n                removeVnodes(parent, [oldVnode], 0, 0);\n            }\n        }\n        for (i = 0; i < insertedVnodeQueue.length; ++i) {\n            insertedVnodeQueue[i].data.hook.insert(insertedVnodeQueue[i]);\n        }\n        for (i = 0; i < cbs.post.length; ++i)\n            cbs.post[i]();\n        return vnode;\n    };\n}\nexports.init = init;\n//# sourceMappingURL=snabbdom.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/snabbdom/snabbdom.js\n// module id = 30\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar h_1 = require(\"./h\");\nfunction copyToThunk(vnode, thunk) {\n    thunk.elm = vnode.elm;\n    vnode.data.fn = thunk.data.fn;\n    vnode.data.args = thunk.data.args;\n    thunk.data = vnode.data;\n    thunk.children = vnode.children;\n    thunk.text = vnode.text;\n    thunk.elm = vnode.elm;\n}\nfunction init(thunk) {\n    var cur = thunk.data;\n    var vnode = cur.fn.apply(undefined, cur.args);\n    copyToThunk(vnode, thunk);\n}\nfunction prepatch(oldVnode, thunk) {\n    var i, old = oldVnode.data, cur = thunk.data;\n    var oldArgs = old.args, args = cur.args;\n    if (old.fn !== cur.fn || oldArgs.length !== args.length) {\n        copyToThunk(cur.fn.apply(undefined, args), thunk);\n        return;\n    }\n    for (i = 0; i < args.length; ++i) {\n        if (oldArgs[i] !== args[i]) {\n            copyToThunk(cur.fn.apply(undefined, args), thunk);\n            return;\n        }\n    }\n    copyToThunk(oldVnode, thunk);\n}\nexports.thunk = function thunk(sel, key, fn, args) {\n    if (args === undefined) {\n        args = fn;\n        fn = key;\n        key = undefined;\n    }\n    return h_1.h(sel, {\n        key: key,\n        hook: { init: init, prepatch: prepatch },\n        fn: fn,\n        args: args\n    });\n};\nexports.default = exports.thunk;\n//# sourceMappingURL=thunk.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/snabbdom/thunk.js\n// module id = 31\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vnode_1 = require(\"./vnode\");\nvar htmldomapi_1 = require(\"./htmldomapi\");\nfunction toVNode(node, domApi) {\n    var api = domApi !== undefined ? domApi : htmldomapi_1.default;\n    var text;\n    if (api.isElement(node)) {\n        var id = node.id ? '#' + node.id : '';\n        var cn = node.getAttribute('class');\n        var c = cn ? '.' + cn.split(' ').join('.') : '';\n        var sel = api.tagName(node).toLowerCase() + id + c;\n        var attrs = {};\n        var children = [];\n        var name_1;\n        var i = void 0, n = void 0;\n        var elmAttrs = node.attributes;\n        var elmChildren = node.childNodes;\n        for (i = 0, n = elmAttrs.length; i < n; i++) {\n            name_1 = elmAttrs[i].nodeName;\n            if (name_1 !== 'id' && name_1 !== 'class') {\n                attrs[name_1] = elmAttrs[i].nodeValue;\n            }\n        }\n        for (i = 0, n = elmChildren.length; i < n; i++) {\n            children.push(toVNode(elmChildren[i]));\n        }\n        return vnode_1.default(sel, { attrs: attrs }, children, undefined, node);\n    }\n    else if (api.isText(node)) {\n        text = api.getTextContent(node);\n        return vnode_1.default(undefined, undefined, undefined, text, node);\n    }\n    else if (api.isComment(node)) {\n        text = api.getTextContent(node);\n        return vnode_1.default('!', {}, [], text, node);\n    }\n    else {\n        return vnode_1.default('', {}, [], undefined, node);\n    }\n}\nexports.toVNode = toVNode;\nexports.default = toVNode;\n//# sourceMappingURL=tovnode.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/snabbdom/tovnode.js\n// module id = 32\n// module chunks = 0","var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nimport h from 'snabbdom/h';\nimport { renderComponentNextFrame, renderComponentNow, renderNewComponentNow } from './render';\nimport { shallowEqual } from './util';\nimport Messages from './messages';\nimport { Observable } from '../observable';\nimport { Store } from '../store';\nimport log, { shouldLog } from './log';\n\nvar empty = {};\n\nexport default function Component(options) {\n  var name = options.name,\n      _options$props = options.props,\n      props = _options$props === undefined ? empty : _options$props,\n      _options$sel = options.sel,\n      sel = _options$sel === undefined ? 'component' : _options$sel,\n      initState = options.initState,\n      connect = options.connect,\n      render = options.render;\n\n\n  var key = props.key === undefined ? name : name + '_' + props.key;\n\n  var data = {\n    key: key,\n    hook: { insert: insert, postpatch: postpatch, destroy: destroy },\n    component: { props: props, initState: initState, connect: connect, render: render, key: name },\n    attrs: { name: name }\n  };\n\n  // An empty placeholder is returned, and that's all our parent is going to see.\n  // Each component handles its own internal rendering.\n  var compVnode = h(sel, data);\n  data.component.compVnode = compVnode;\n  return compVnode;\n}\n\nfunction insert(vnode) {\n  var component = vnode.data.component;\n  var props = component.props,\n      initState = component.initState,\n      connect = component.connect;\n\n\n  var connected = false;\n\n  // Lookup from HTML Element to component, used in DOM-based messaging\n  vnode.elm.__comp__ = component;\n\n  // Store the component depth once it's attached to the DOM so we can render\n  // component hierarchies in a predictive (top -> down) manner.\n  component.depth = getDepth(vnode.elm);\n\n  // Internal callbacks\n  component.lifecycle = {\n    rendered: rendered\n  };\n\n  var messages = new Messages(vnode.elm);\n\n  component.elm = vnode.elm;\n  component.messages = messages;\n\n  var propsObservable = Observable(function (add) {\n    add(component.props);\n    component.lifecycle.propsChanged = add;\n  }).named('props');\n\n  // Eagerly subscribe so that the observable get its first value and we honour\n  // the ObservableWithInitialValue interface contract.\n  propsObservable.subscribe(function (x) {\n    return x;\n  });\n\n  component.store = Store(initState(props), function (on, msg) {\n    messages.storeMsg = msg;\n\n    var connectParams = {\n      on: on,\n      props: propsObservable,\n      msg: messages\n    };\n\n    connect(connectParams);\n    connected = true;\n\n    // First render.\n    // Render right after our parent (which is in the middle of a patch)\n    // so that we honour the snabbdom's insert hook,\n    // e.g we get patched into our parent after our parent was added to the document.\n    renderNewComponentNow(component);\n  }, {\n    name: component.key,\n    log: shouldLog(log.message, component.key)\n  });\n\n  component.store.state.sliding2().subscribe(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        newState = _ref2[0],\n        oldState = _ref2[1];\n\n    var shouldRender =\n    // Skip the first notification (hot observable)\n    oldState &&\n    // synchronous observables triggering before the first render should just be accumulated\n    connected &&\n    // the props observable triggered, a synchronous render is made right after so skip\n    !component.lifecycle.propsChanging &&\n    // null update\n    !shallowEqual(oldState, newState);\n\n    if (shouldRender) renderComponentNextFrame(component);\n  });\n}\n\n// Called on every parent re-render, this is where the props passed by the component's parent may have changed.\nfunction postpatch(oldVnode, vnode) {\n  var oldData = oldVnode.data;\n  var newData = vnode.data;\n\n  // Server side rendering: Reconcilating with a server-rendered node will have skipped calling insert()\n  if (!oldData.component) {\n    insert(vnode);\n  }\n\n  // oldData wouldn't have a component reference set if it came from the server (it's first set in insert())\n  var component = oldData.component || newData.component;\n  var oldProps = component.props;\n  var newProps = newData.component.props;\n\n  // Update the original component with any property that may have changed during this render pass\n  component.props = newProps;\n\n  newData.component = component;\n\n  // If the props changed, render immediately as we are already\n  // in the render context of our parent\n  if (!shallowEqual(oldProps, newProps)) {\n\n    component.lifecycle.propsChanging = true;\n    component.lifecycle.propsChanged(newProps);\n    component.lifecycle.propsChanging = false;\n\n    renderComponentNow(component);\n  }\n}\n\nfunction rendered(component, newVnode) {\n  // Store the new vnode inside the component so we can diff it next render\n  component.vnode = newVnode;\n\n  // For now, only lift the hook of non Array render outputs\n  if (newVnode && !Array.isArray(newVnode)) {\n    // Lift any 'remove' hook to our placeholder vnode for it to be called\n    // as the placeholder is all our parent vnode knows about.\n    // TODO: Call all the hooks of an Array VNode?\n    var hook = newVnode.data.hook && newVnode.data.hook.remove;\n    if (hook) component.compVnode.data.hook.remove = hook;\n  }\n}\n\nfunction destroy(vnode) {\n  var comp = vnode.data.component;\n  comp.vnode.elm.__comp__ = null;\n\n  Array.isArray(comp.vnode) ? comp.vnode.forEach(destroyVnode) : destroyVnode(comp.vnode);\n\n  comp.store.destroy();\n\n  comp.destroyed = true;\n}\n\n// Destroy our vnode recursively\n// Note: Can't invoke modules' destroy hook as they're hidden in snabbdom's closure.\n// The default modules don't do anything in destroy() anyway.\nfunction destroyVnode(vnode) {\n  if (!vnode) return;\n\n  var data = vnode.data;\n\n  if (!data) return;\n\n  if (data.hook && data.hook.destroy) data.hook.destroy(vnode);\n  if (vnode.children) vnode.children.forEach(destroyVnode);\n}\n\nfunction getDepth(elm) {\n  var depth = 0;\n  var parent = elm.parentElement;\n  while (parent) {\n    depth++;\n    parent = parent.parentElement;\n  }\n  return depth;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/lib/component.js\n// module id = 33\n// module chunks = 0","\nimport { Observable } from './observable';\n\nexport default function debounce(wait, source) {\n  return Observable(function (add) {\n    var debouncedAdd = debounceFunction(wait, add);\n    var unsubscribe = source.subscribe(debouncedAdd);\n\n    return function () {\n      unsubscribe();\n      debouncedAdd.cancel();\n    };\n  });\n}\n\nexport function debounceFunction(wait, func) {\n  var timeout = void 0;\n\n  var debounced = function debounced() {\n    var args = arguments;\n\n    var later = function later() {\n      timeout = undefined;\n      func.apply(null, args);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n\n  debounced.cancel = function () {\n    return clearTimeout(timeout);\n  };\n  return debounced;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/debounce.js\n// module id = 34\n// module chunks = 0","\nimport { Observable } from './observable';\n\nexport default function delay(delayValue, source) {\n  return Observable(function (add) {\n    var currentTimeouts = [];\n\n    var unsubSource = source.subscribe(function (val, name) {\n\n      var timeout = setTimeout(function () {\n        var index = currentTimeouts.indexOf(timeout);\n        currentTimeouts.splice(index, 1);\n        add(val, name);\n      }, delayValue);\n\n      currentTimeouts.push(timeout);\n    });\n\n    return function () {\n      currentTimeouts.forEach(function (timeout) {\n        return clearTimeout(timeout);\n      });\n      unsubSource();\n    };\n  });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/delay.js\n// module id = 35\n// module chunks = 0","\nimport { Observable } from './observable';\n\nexport default function drop(count, source) {\n  return Observable(function (add) {\n    var dropped = 0;\n    return source.subscribe(function (val, name) {\n      if (dropped++ >= count) add(val, name);\n    });\n  });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/drop.js\n// module id = 36\n// module chunks = 0","\nimport { Observable } from './observable';\n\nexport default function filter(predicate, source) {\n  return Observable(function (add) {\n    return source.subscribe(function (val, name) {\n      if (predicate(val)) add(val, name);\n    });\n  });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/filter.js\n// module id = 37\n// module chunks = 0","\nimport { Observable } from './observable';\n\nexport default function flatMapLatest(mapper, source) {\n  return Observable(function (add) {\n    var currentUnsub = void 0;\n\n    var unsubSource = source.subscribe(function (val) {\n      currentUnsub && currentUnsub();\n      var mappedObs = mapper(val);\n      currentUnsub = mappedObs.subscribe(add);\n    });\n\n    return function () {\n      currentUnsub && currentUnsub();\n      unsubSource();\n    };\n  });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/flatMapLatest.js\n// module id = 38\n// module chunks = 0","import { Observable } from './observable';\nimport { Set } from '../lib/util';\n\nexport default function fromEvent(name, el, childSelector) {\n  return Observable(function (add) {\n\n    var obsName = childSelector ? 'fromEvent[type=' + name + ', selector=' + childSelector + ']' : 'fromEvent[type=' + name + ']';\n\n    var handler = childSelector ? function (evt) {\n      if (targetMatches(evt.target, childSelector, el)) add(evt, obsName);\n    } : function (evt) {\n      return add(evt, obsName);\n    };\n\n    var useCapture = childSelector && name in nonBubblingEvents;\n\n    el.addEventListener(name, handler, useCapture);\n    return function () {\n      return el.removeEventListener(name, handler, useCapture);\n    };\n  });\n}\n\nvar nonBubblingEvents = Set('blur', 'canplay', 'canplaythrough', 'change', 'durationchange', 'emptied', 'ended', 'focus', 'load', 'loadeddata', 'loadedmetadata', 'mouseenter', 'mouseleave', 'pause', 'play', 'playing', 'ratechange', 'reset', 'scroll', 'seeked', 'seeking', 'stalled', 'submit', 'suspend', 'timeupdate', 'unload', 'volumechange', 'waiting');\n\nvar proto = typeof window !== 'undefined' && Element ? Element.prototype : {};\nvar nativeMatches = proto.matches || proto.matchesSelector || proto.webkitMatchesSelector || proto.mozMatchesSelector || proto.msMatchesSelector || proto.oMatchesSelector;\n\nfunction matches(el, selector) {\n  return nativeMatches.call(el, selector);\n}\n\nfunction targetMatches(target, selector, root) {\n  for (var el = target; el && el !== root; el = el.parentElement) {\n    if (matches(el, selector)) return true;\n  }\n  return false;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/fromEvent.js\n// module id = 39\n// module chunks = 0","import { Observable } from './observable';\nimport { Ok, Err } from 'space-lift';\n\nexport default function fromPromise(promise) {\n  return Observable(function (add) {\n    var active = true;\n\n    promise.then(function (value) {\n      if (active) add(Ok(value));\n    }, function (error) {\n      if (active) add(Err(error));\n    });\n\n    return function () {\n      active = false;\n    };\n  }).named('fromPromise');\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/fromPromise.js\n// module id = 40\n// module chunks = 0","import lift from './lift';\nexport default lift;\nexport { ArrayOps, ObjectOps, NumberOps, StringOps, DateOps, getValue } from './lift';\nexport { update, deepUpdate, DELETE } from 'immupdate';\nexport { Option, None, Some } from './option';\nexport { Result, Ok, Err } from './result';\nexport { range } from './array/range';\nexport { fromArrayLike } from './array/fromArrayLike';\nexport { tuple } from './array/tuple';\nexport { Set } from './object/set';\nexport { memoize } from './function/memoize';\nimport * as isType from './object/is';\nexport var is = isType;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/space-lift/es/index.js\n// module id = 41\n// module chunks = 0","//--------------------------------------\n//  Shallow update\n//--------------------------------------\n/** Performs a shallow update of an object using a partial object of the same shape. A new object is returned. */\nexport function update(host, spec) {\n    var result = clone(host);\n    for (var key in spec) {\n        var specValue = spec[key];\n        if (specValue === DELETE) {\n            delete result[key];\n        }\n        else {\n            result[key] = specValue;\n        }\n    }\n    return result;\n}\n// We lie about the public type so that only a property that is optional or that can be assigned to undefined can be DELETE'd\n/** Marker used to delete a key */\nexport var DELETE = {};\nvar _Updater = /** @class */ (function () {\n    function _Updater(data) {\n        this.data = data;\n    }\n    _Updater.prototype.at = function (keyOrIndex) {\n        return new _Updater({ type: 'at', parent: this, field: keyOrIndex });\n    };\n    _Updater.prototype.set = function (value) {\n        var _this = this;\n        var doSet = function (target) {\n            var result = _this.cloneForUpdate(target);\n            if (result.name === 'aborted')\n                return target;\n            var clonedTarget = result.clonedTarget, leafHost = result.leafHost, field = result.field;\n            value === DELETE ? delete leafHost[field] : leafHost[field] = value;\n            return clonedTarget;\n        };\n        var boundTarget = this.findBoundTarget();\n        return boundTarget\n            ? doSet(boundTarget)\n            : doSet;\n    };\n    _Updater.prototype.modify = function (modifier) {\n        var _this = this;\n        var doModify = function (target) {\n            var result = _this.cloneForUpdate(target);\n            if (result.name === 'aborted')\n                return target;\n            var clonedTarget = result.clonedTarget, leafHost = result.leafHost, field = result.field;\n            var value = modifier(leafHost[field]);\n            value === DELETE ? delete leafHost[field] : leafHost[field] = value;\n            return clonedTarget;\n        };\n        var boundTarget = this.findBoundTarget();\n        return boundTarget\n            ? doModify(boundTarget)\n            : doModify;\n    };\n    _Updater.prototype.withDefault = function (value) {\n        return new _Updater({ type: 'withDefault', parent: this, defaultValue: value });\n    };\n    _Updater.prototype.abortIfUndef = function () {\n        return new _Updater({ type: 'abortIfUndef', parent: this });\n    };\n    _Updater.prototype.findBoundTarget = function () {\n        var current = this;\n        while (true) {\n            if (current.data.type === 'root')\n                return current.data.boundTarget;\n            current = current.data.parent;\n        }\n    };\n    _Updater.prototype.parentUpdaters = function () {\n        var updaters = [this];\n        var parentUpdater = this.data.parent;\n        // Ignore the root updater\n        while (parentUpdater && parentUpdater.data.parent) {\n            updaters.unshift(parentUpdater);\n            parentUpdater = parentUpdater.data.parent;\n        }\n        return updaters;\n    };\n    _Updater.prototype.getNextValue = function (previousHost, host, field, isLast) {\n        if (this.data.type === 'at') {\n            var newField = this.data.field;\n            var value_1 = host[newField];\n            var nextValue = isObjectOrArray(value_1) ? clone(value_1) : value_1;\n            var newHost_1 = isLast ? host : nextValue;\n            host[this.data.field] = nextValue;\n            return { host: newHost_1, field: newField };\n        }\n        var value = previousHost[field];\n        if (this.data.type === 'abortIfUndef' && value === undefined) {\n            return { host: host, field: field, aborted: true };\n        }\n        if (this.data.type === 'withDefault' && value === undefined) {\n            var nextValue = this.data.defaultValue;\n            var newHost_2 = isLast ? previousHost : nextValue;\n            previousHost[field] = nextValue;\n            return { host: newHost_2, field: field };\n        }\n        var newHost = isLast ? previousHost : host;\n        return { host: newHost, field: field };\n    };\n    _Updater.prototype.cloneForUpdate = function (target) {\n        var updaters = this.parentUpdaters();\n        var obj = clone(target);\n        var previousHost = obj;\n        var host = obj;\n        var field = '';\n        for (var i = 0; i < updaters.length; i++) {\n            var result = updaters[i].getNextValue(previousHost, host, field, i === updaters.length - 1);\n            if (result.aborted)\n                return { name: 'aborted' };\n            previousHost = host;\n            host = result.host;\n            field = result.field;\n        }\n        return {\n            name: 'result',\n            clonedTarget: obj,\n            leafHost: host,\n            field: field\n        };\n    };\n    return _Updater;\n}());\nfunction isObjectOrArray(obj) {\n    return obj !== null && typeof obj === 'object';\n}\nfunction clone(obj) {\n    if (Array.isArray(obj))\n        return obj.slice();\n    var cloned = {};\n    Object.keys(obj).forEach(function (key) { cloned[key] = obj[key]; });\n    return cloned;\n}\nexport function deepUpdate(target) {\n    return new _Updater({ type: 'root', boundTarget: target });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/space-lift/node_modules/immupdate/es/immupdate.js\n// module id = 42\n// module chunks = 0","import lift, { getValue } from '../lift';\n// The Option factory / static object\nvar OptionObject = function (value) {\n    return isDef(value) ? Some(value) : None;\n};\nOptionObject.all = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var values = [];\n    var arr = Array.isArray(args[0]) ? args[0] : args;\n    for (var i = 0; i < arr.length; i++) {\n        var value = arr[i];\n        if (Option.isOption(value))\n            value = value.get();\n        if (!isDef(value))\n            return None;\n        values.push(value);\n    }\n    return Some(values);\n};\nOptionObject.isOption = function (value) {\n    return !!value && (value.type === 'some' || value.type === 'none');\n};\nfunction makeNone() {\n    var self = {};\n    function returnNone() { return None; }\n    self.type = 'none';\n    self.get = function () { return undefined; };\n    self.isDefined = function () { return false; };\n    self.forEach = function () { };\n    self.map = returnNone;\n    self.flatMap = returnNone;\n    self.filter = returnNone;\n    self.fold = function (ifEmpty) { return ifEmpty(); };\n    self.orElse = function (alt) { return alt(); };\n    self.getOrElse = function (alt) { return alt; };\n    self.toArray = function () { return lift([]); };\n    self.toString = function () { return 'None'; };\n    self.toJSON = function () { return null; };\n    return self;\n}\nfunction _Some(value) {\n    this.value = value;\n}\n_Some.prototype = {\n    type: 'some',\n    get: function () {\n        return this.value;\n    },\n    isDefined: function () {\n        return true;\n    },\n    forEach: function (fn) {\n        fn(this.value);\n    },\n    map: function (fn) {\n        return Option(getValue(fn(this.value)));\n    },\n    flatMap: function (fn) {\n        return fn(this.value);\n    },\n    filter: function (fn) {\n        return fn(this.value) ? this : None;\n    },\n    fold: function (ifEmpty, ifDefined) {\n        return ifDefined(this.value);\n    },\n    orElse: function () {\n        return this;\n    },\n    getOrElse: function () {\n        return this.value;\n    },\n    toArray: function () {\n        return lift([this.value]);\n    },\n    toString: function () {\n        return \"Some(\" + this.value + \")\";\n    },\n    toJSON: function () {\n        return this.value;\n    }\n};\nfunction isDef(value) {\n    return value !== null && value !== undefined;\n}\nexport var Option = OptionObject;\n/** Creates a new Some instance using a non nullable value */\n// extends {} to prevent null and undefined being passed\nexport function Some(value) {\n    return new _Some(value);\n}\nexport var None = makeNone();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/space-lift/es/option/index.js\n// module id = 43\n// module chunks = 0","import { getValue } from '../lift';\nvar ResultObject = {};\nResultObject.all = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var okValues = [];\n    var arr = Array.isArray(args[0]) ? args[0] : args;\n    var currentResult;\n    for (var i = 0; i < arr.length; i++) {\n        var currentResult_1 = arr[i];\n        if (!currentResult_1.isOk())\n            return currentResult_1;\n        okValues.push(currentResult_1.get());\n    }\n    return Ok(okValues);\n};\nResultObject.isResult = function (value) {\n    return !!value && (value.type === 'ok' || value.type === 'err');\n};\nfunction _Ok(value) {\n    this._value = value;\n}\n_Ok.prototype = {\n    type: 'ok',\n    isOk: function () {\n        return true;\n    },\n    map: function (fn) {\n        return Ok(getValue(fn(this._value)));\n    },\n    mapError: function (fn) {\n        return this;\n    },\n    flatMap: function (fn) {\n        return fn(this._value);\n    },\n    fold: function (ifErr, ifOk) {\n        return ifOk(this._value);\n    },\n    toString: function () {\n        return \"Ok(\" + this._value + \")\";\n    },\n    get: function () {\n        return this._value;\n    }\n};\nfunction _Err(error) {\n    this._error = error;\n}\n_Err.prototype = {\n    type: 'err',\n    isOk: function () {\n        return false;\n    },\n    map: function (fn) {\n        return this;\n    },\n    mapError: function (fn) {\n        return Err(fn(this._error));\n    },\n    flatMap: function (fn) {\n        return this;\n    },\n    fold: function (ifErr, ifOk) {\n        return ifErr(this._error);\n    },\n    toString: function () {\n        return \"Err(\" + this._error + \")\";\n    },\n    get: function () {\n        return this._error;\n    }\n};\nexport var Result = ResultObject;\nexport function Ok(value) {\n    return new _Ok(value);\n}\nexport function Err(error) {\n    return new _Err(error);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/space-lift/es/result/index.js\n// module id = 44\n// module chunks = 0","import { ArrayOps } from '../lift';\n/*\n* Returns a number[] wrapper with all numbers from start to stop (inclusive),\n* incremented or decremented by step.\n*/\nexport function range(start, stop, step) {\n    if (arguments.length === 1) {\n        stop = arguments[0] - 1;\n        start = 0;\n    }\n    step = step || 1;\n    var result = [];\n    var increasing = step > 0;\n    var next = start;\n    while ((increasing && next <= stop) || (!increasing && next >= stop)) {\n        result.push(next);\n        next = next + step;\n    }\n    return new ArrayOps(result);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/space-lift/es/array/range.js\n// module id = 45\n// module chunks = 0","import { ArrayOps } from '../lift';\n/**\n * Converts an Array-like object (such as an arguments or NodeList instance) to a regular Array\n */\nexport function fromArrayLike(arrayLike) {\n    return new ArrayOps([].slice.call(arrayLike));\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/space-lift/es/array/fromArrayLike.js\n// module id = 46\n// module chunks = 0","export function tuple(arr) {\n    return arr;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/space-lift/es/array/tuple.js\n// module id = 47\n// module chunks = 0","import { ObjectOps } from '../lift';\n/**\n * Creates a Set-like object (string keys, true values) from a list of keys\n */\nexport function Set() {\n    var keys = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        keys[_i] = arguments[_i];\n    }\n    var result = {};\n    keys.forEach(function (key) { return result[key] = true; });\n    return new ObjectOps(result);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/space-lift/es/object/set.js\n// module id = 48\n// module chunks = 0","import { object as isObject } from '../object/is';\nvar currentMemoId = 0;\n/**\n * Memoizes a function of arbitrary arity.\n * This has two main uses:\n *   1) Reducing the CPU time taken by expensive calculations at the cost of some memory overhead\n *   2) Producing stable references for a given set of arguments. Useful when relying on reference equality.\n *\n * Memoized functions keep internal state. If you wish to clear that state entirely, you can recreate the function.\n */\nexport function memoize(fun, options) {\n    // The unique property name used by this memoize function instance.\n    // This is used to store the id/reference of object arguments, as Weak maps/sets are very limited.\n    var memoKey = \"__memo__\" + currentMemoId++;\n    var lastArgKeys = [];\n    var cacheSize = (options && options.cacheSize) || 30;\n    var keyFunction = options && options.key;\n    // The unique ids/references of objects inside the arityNCache cache\n    var objId = 0;\n    var arity0Cache;\n    var arityNCache;\n    var keyCache;\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        // 0 arguments edge-case\n        if (args.length === 0) {\n            if (!arity0Cache)\n                arity0Cache = fun();\n            return arity0Cache;\n        }\n        else if (keyFunction) {\n            keyCache = keyCache || {};\n            var key = keyFunction.apply(null, args);\n            var result = keyCache[key];\n            if (!result) {\n                lastArgKeys.push(key);\n                limitCacheSize(keyCache, lastArgKeys, cacheSize);\n                result = keyCache[key] = fun.apply(null, args);\n            }\n            return result;\n        }\n        else {\n            arityNCache = arityNCache || {};\n            var key = '';\n            for (var i = 0; i < args.length; i++) {\n                var arg = args[i];\n                var argKey = void 0;\n                if (isObject(arg)) {\n                    argKey = arg[memoKey];\n                    if (!argKey) {\n                        // Non enumerable\n                        Object.defineProperty(arg, memoKey, { value: \"obj\" + objId++ });\n                        argKey = arg[memoKey];\n                    }\n                }\n                else {\n                    argKey = arg;\n                }\n                key += (argKey + '_');\n            }\n            var result = arityNCache[key];\n            if (!result) {\n                lastArgKeys.push(key);\n                limitCacheSize(arityNCache, lastArgKeys, cacheSize);\n                result = arityNCache[key] = fun.apply(null, args);\n            }\n            return result;\n        }\n    };\n}\nfunction limitCacheSize(cache, lastArgKeys, size) {\n    if (lastArgKeys.length === size + 1) {\n        var key = lastArgKeys.shift();\n        delete cache[key];\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/space-lift/es/function/memoize.js\n// module id = 49\n// module chunks = 0","\nimport { Observable } from './observable';\n\nexport default function interval(time) {\n  return Observable(function (add) {\n    var intervalId = setInterval(add, time);\n    return function () {\n      return clearInterval(intervalId);\n    };\n  }).named('interval');\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/interval.js\n// module id = 50\n// module chunks = 0","\nimport { Observable } from './observable';\n\nexport default function map(mapper, source) {\n  return Observable(function (add) {\n    return source.subscribe(function (val, name) {\n      return add(mapper(val), name);\n    });\n  });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/map.js\n// module id = 51\n// module chunks = 0","\nimport { Observable } from './observable';\n\nexport default function merge() {\n  for (var _len = arguments.length, sources = Array(_len), _key = 0; _key < _len; _key++) {\n    sources[_key] = arguments[_key];\n  }\n\n  return Observable(function (add) {\n    var unsubs = sources.map(function (obs) {\n      return obs.subscribe(add);\n    });\n    return function () {\n      return unsubs.forEach(function (unsub) {\n        return unsub();\n      });\n    };\n  });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/merge.js\n// module id = 52\n// module chunks = 0","\nimport { Observable } from './observable';\n\nexport default function partition(predicate, source) {\n  return [Observable(function (add) {\n    return source.subscribe(function (value, name) {\n      if (predicate(value)) add(value, name);\n    });\n  }), Observable(function (add) {\n    return source.subscribe(function (value, name) {\n      if (!predicate(value)) add(value, name);\n    });\n  })];\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/partition.js\n// module id = 53\n// module chunks = 0","\nimport { Observable } from './observable';\n\nexport default function pure(value) {\n  return Observable(function (add) {\n    return add(value);\n  }).named('pure');\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/pure.js\n// module id = 54\n// module chunks = 0","\nimport { Observable } from './observable';\n\nexport function sliding2(source) {\n  return sliding(2, source);\n}\n\nexport default function sliding(size, source) {\n  var window = [];\n\n  return Observable(function (add) {\n    return source.subscribe(function (val, name) {\n      window = [val].concat(window);\n      window = window.slice(0, size);\n      add(window, name);\n    });\n  });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/sliding.js\n// module id = 55\n// module chunks = 0","\nimport { Observable } from './observable';\n\nexport default function throttle(wait, source) {\n  return Observable(function (add) {\n    var throttledAdd = throttleFunction(wait, add);\n    var unsubscribe = source.subscribe(throttledAdd);\n\n    return function () {\n      unsubscribe();\n      throttledAdd.cancel();\n    };\n  });\n}\n\nexport function throttleFunction(wait, func) {\n  var lastCallTime = void 0;\n  var timeout = void 0;\n  var args = void 0;\n\n  var throttled = function throttled() {\n    // Always use the latest arguments, even in an already scheduled call\n    args = arguments;\n\n    // A throttled call is already scheduled, noop\n    if (timeout !== undefined) return;\n\n    var delta = lastCallTime ? wait - Date.now() + lastCallTime : 0;\n\n    timeout = setTimeout(function () {\n      timeout = undefined;\n      lastCallTime = Date.now();\n      func.apply(null, args);\n    }, delta);\n  };\n\n  throttled.cancel = function () {\n    return clearTimeout(timeout);\n  };\n  return throttled;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/observable/throttle.js\n// module id = 56\n// module chunks = 0","import { Set } from './util';\nimport { _sendToElement } from './messages';\n\n/* snabbdom module extension used to register Messages as event listeners */\n\nfunction updateEventListeners(oldVnode, vnode) {\n  var oldEvents = oldVnode.data.events;\n  var events = vnode.data.events;\n\n  if (!events) return;\n\n  var listeners = oldEvents ? oldEvents.listeners : {};\n  events.listeners = listeners;\n\n  var _loop = function _loop() {\n    var current = events[name];\n    var old = oldEvents && oldEvents[name];\n\n    if (current && current !== old) {\n\n      if (old && isSameMessageAndPayload(current, current.payload, old, old.payload)) return 'continue';\n\n      if (listeners[name]) vnode.elm.removeEventListener(name, listeners[name]);\n\n      listeners[name] = function (evt) {\n        return _sendToElement(evt.currentTarget, current(evt));\n      };\n      vnode.elm.addEventListener(name, listeners[name]);\n    }\n  };\n\n  for (name in events) {\n    var _ret = _loop();\n\n    if (_ret === 'continue') continue;\n  }\n\n  if (!oldEvents) return;\n\n  for (name in oldEvents) {\n    if (events[name] === undefined) vnode.elm.removeEventListener(name, listeners[name]);\n  }\n}\n\nfunction isSameMessageAndPayload(message, payload, oldMessage, oldPayload) {\n  return message._id === oldMessage._id && payload === oldPayload;\n}\n\nexport var eventsModule = {\n  create: updateEventListeners,\n  update: updateEventListeners\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/kaiju/es/lib/events.js\n// module id = 57\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction updateClass(oldVnode, vnode) {\n    var cur, name, elm = vnode.elm, oldClass = oldVnode.data.class, klass = vnode.data.class;\n    if (!oldClass && !klass)\n        return;\n    if (oldClass === klass)\n        return;\n    oldClass = oldClass || {};\n    klass = klass || {};\n    for (name in oldClass) {\n        if (!klass[name]) {\n            elm.classList.remove(name);\n        }\n    }\n    for (name in klass) {\n        cur = klass[name];\n        if (cur !== oldClass[name]) {\n            elm.classList[cur ? 'add' : 'remove'](name);\n        }\n    }\n}\nexports.classModule = { create: updateClass, update: updateClass };\nexports.default = exports.classModule;\n//# sourceMappingURL=class.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/snabbdom/modules/class.js\n// module id = 58\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar xlinkNS = 'http://www.w3.org/1999/xlink';\nvar xmlNS = 'http://www.w3.org/XML/1998/namespace';\nvar colonChar = 58;\nvar xChar = 120;\nfunction updateAttrs(oldVnode, vnode) {\n    var key, elm = vnode.elm, oldAttrs = oldVnode.data.attrs, attrs = vnode.data.attrs;\n    if (!oldAttrs && !attrs)\n        return;\n    if (oldAttrs === attrs)\n        return;\n    oldAttrs = oldAttrs || {};\n    attrs = attrs || {};\n    // update modified attributes, add new attributes\n    for (key in attrs) {\n        var cur = attrs[key];\n        var old = oldAttrs[key];\n        if (old !== cur) {\n            if (cur === true) {\n                elm.setAttribute(key, \"\");\n            }\n            else if (cur === false) {\n                elm.removeAttribute(key);\n            }\n            else {\n                if (key.charCodeAt(0) !== xChar) {\n                    elm.setAttribute(key, cur);\n                }\n                else if (key.charCodeAt(3) === colonChar) {\n                    // Assume xml namespace\n                    elm.setAttributeNS(xmlNS, key, cur);\n                }\n                else if (key.charCodeAt(5) === colonChar) {\n                    // Assume xlink namespace\n                    elm.setAttributeNS(xlinkNS, key, cur);\n                }\n                else {\n                    elm.setAttribute(key, cur);\n                }\n            }\n        }\n    }\n    // remove removed attributes\n    // use `in` operator since the previous `for` iteration uses it (.i.e. add even attributes with undefined value)\n    // the other option is to remove all attributes with value == undefined\n    for (key in oldAttrs) {\n        if (!(key in attrs)) {\n            elm.removeAttribute(key);\n        }\n    }\n}\nexports.attributesModule = { create: updateAttrs, update: updateAttrs };\nexports.default = exports.attributesModule;\n//# sourceMappingURL=attributes.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/snabbdom/modules/attributes.js\n// module id = 59\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar raf = (typeof window !== 'undefined' && window.requestAnimationFrame) || setTimeout;\nvar nextFrame = function (fn) { raf(function () { raf(fn); }); };\nfunction setNextFrame(obj, prop, val) {\n    nextFrame(function () { obj[prop] = val; });\n}\nfunction updateStyle(oldVnode, vnode) {\n    var cur, name, elm = vnode.elm, oldStyle = oldVnode.data.style, style = vnode.data.style;\n    if (!oldStyle && !style)\n        return;\n    if (oldStyle === style)\n        return;\n    oldStyle = oldStyle || {};\n    style = style || {};\n    var oldHasDel = 'delayed' in oldStyle;\n    for (name in oldStyle) {\n        if (!style[name]) {\n            if (name[0] === '-' && name[1] === '-') {\n                elm.style.removeProperty(name);\n            }\n            else {\n                elm.style[name] = '';\n            }\n        }\n    }\n    for (name in style) {\n        cur = style[name];\n        if (name === 'delayed' && style.delayed) {\n            for (var name2 in style.delayed) {\n                cur = style.delayed[name2];\n                if (!oldHasDel || cur !== oldStyle.delayed[name2]) {\n                    setNextFrame(elm.style, name2, cur);\n                }\n            }\n        }\n        else if (name !== 'remove' && cur !== oldStyle[name]) {\n            if (name[0] === '-' && name[1] === '-') {\n                elm.style.setProperty(name, cur);\n            }\n            else {\n                elm.style[name] = cur;\n            }\n        }\n    }\n}\nfunction applyDestroyStyle(vnode) {\n    var style, name, elm = vnode.elm, s = vnode.data.style;\n    if (!s || !(style = s.destroy))\n        return;\n    for (name in style) {\n        elm.style[name] = style[name];\n    }\n}\nfunction applyRemoveStyle(vnode, rm) {\n    var s = vnode.data.style;\n    if (!s || !s.remove) {\n        rm();\n        return;\n    }\n    var name, elm = vnode.elm, i = 0, compStyle, style = s.remove, amount = 0, applied = [];\n    for (name in style) {\n        applied.push(name);\n        elm.style[name] = style[name];\n    }\n    compStyle = getComputedStyle(elm);\n    var props = compStyle['transition-property'].split(', ');\n    for (; i < props.length; ++i) {\n        if (applied.indexOf(props[i]) !== -1)\n            amount++;\n    }\n    elm.addEventListener('transitionend', function (ev) {\n        if (ev.target === elm)\n            --amount;\n        if (amount === 0)\n            rm();\n    });\n}\nexports.styleModule = {\n    create: updateStyle,\n    update: updateStyle,\n    destroy: applyDestroyStyle,\n    remove: applyRemoveStyle\n};\nexports.default = exports.styleModule;\n//# sourceMappingURL=style.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/snabbdom/modules/style.js\n// module id = 60\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction invokeHandler(handler, vnode, event) {\n    if (typeof handler === \"function\") {\n        // call function handler\n        handler.call(vnode, event, vnode);\n    }\n    else if (typeof handler === \"object\") {\n        // call handler with arguments\n        if (typeof handler[0] === \"function\") {\n            // special case for single argument for performance\n            if (handler.length === 2) {\n                handler[0].call(vnode, handler[1], event, vnode);\n            }\n            else {\n                var args = handler.slice(1);\n                args.push(event);\n                args.push(vnode);\n                handler[0].apply(vnode, args);\n            }\n        }\n        else {\n            // call multiple handlers\n            for (var i = 0; i < handler.length; i++) {\n                invokeHandler(handler[i]);\n            }\n        }\n    }\n}\nfunction handleEvent(event, vnode) {\n    var name = event.type, on = vnode.data.on;\n    // call event handler(s) if exists\n    if (on && on[name]) {\n        invokeHandler(on[name], vnode, event);\n    }\n}\nfunction createListener() {\n    return function handler(event) {\n        handleEvent(event, handler.vnode);\n    };\n}\nfunction updateEventListeners(oldVnode, vnode) {\n    var oldOn = oldVnode.data.on, oldListener = oldVnode.listener, oldElm = oldVnode.elm, on = vnode && vnode.data.on, elm = (vnode && vnode.elm), name;\n    // optimization for reused immutable handlers\n    if (oldOn === on) {\n        return;\n    }\n    // remove existing listeners which no longer used\n    if (oldOn && oldListener) {\n        // if element changed or deleted we remove all existing listeners unconditionally\n        if (!on) {\n            for (name in oldOn) {\n                // remove listener if element was changed or existing listeners removed\n                oldElm.removeEventListener(name, oldListener, false);\n            }\n        }\n        else {\n            for (name in oldOn) {\n                // remove listener if existing listener removed\n                if (!on[name]) {\n                    oldElm.removeEventListener(name, oldListener, false);\n                }\n            }\n        }\n    }\n    // add new listeners which has not already attached\n    if (on) {\n        // reuse existing listener or create new\n        var listener = vnode.listener = oldVnode.listener || createListener();\n        // update vnode for listener\n        listener.vnode = vnode;\n        // if element changed or added we add all needed listeners unconditionally\n        if (!oldOn) {\n            for (name in on) {\n                // add listener if element was changed or new listeners added\n                elm.addEventListener(name, listener, false);\n            }\n        }\n        else {\n            for (name in on) {\n                // add listener if new listener added\n                if (!oldOn[name]) {\n                    elm.addEventListener(name, listener, false);\n                }\n            }\n        }\n    }\n}\nexports.eventListenersModule = {\n    create: updateEventListeners,\n    update: updateEventListeners,\n    destroy: updateEventListeners\n};\nexports.default = exports.eventListenersModule;\n//# sourceMappingURL=eventlisteners.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/snabbdom/modules/eventlisteners.js\n// module id = 61\n// module chunks = 0","\"use strict\";\n//--------------------------------------------------------------------------------------------------\n// The main application\n//--------------------------------------------------------------------------------------------------\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst kaiju_1 = require(\"kaiju\");\nconst immupdate_1 = require(\"immupdate\");\nconst route_1 = require(\"./stores/route\");\nconst route_2 = require(\"./stores/route\");\nconst dashboard_1 = require(\"./components/dashboard\");\nconst importpgn_1 = require(\"./components/importpgn\");\nconst logo_1 = require(\"./components/logo\");\nconst reader_1 = require(\"./components/reader\");\nconst component_1 = require(\"./server/component\");\nconst splash_1 = require(\"./components/splash\");\nfunction default_1() {\n    return kaiju_1.Component({ name: 'app', initState, connect, render });\n}\nexports.default = default_1;\nfunction initState() {\n    return { route: route_1.default.state().route };\n}\nfunction connect({ on }) {\n    on(route_1.default.state, (state, route) => {\n        return immupdate_1.update(state, { route: route.route });\n    });\n}\nfunction render({ state }) {\n    function connection() {\n        return kaiju_1.h(\"connection\", {}, [\n            component_1.default({ url: \"ws://127.0.0.1:3012\" })\n        ]);\n    }\n    if (state.route == route_2.Route.Splash) {\n        return kaiju_1.h(\"delila.splash\", {}, [\n            splash_1.default(),\n            connection(),\n        ]);\n    }\n    else if (state.route == route_2.Route.Dashboard) {\n        return kaiju_1.h(\"delila.dashboard\", {}, [\n            logo_1.default(),\n            dashboard_1.default(),\n            connection()\n        ]);\n    }\n    else if (state.route == route_2.Route.Reader) {\n        return kaiju_1.h(\"delila.reader\", {}, [\n            logo_1.default(),\n            importpgn_1.default(),\n            reader_1.default(),\n            connection()\n        ]);\n    }\n    else {\n        return kaiju_1.h(\"delila.unknown\", {}, [\n            kaiju_1.h(\"h1\", \"Unknown Route\")\n        ]);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.ts","\"use strict\";\n//--------------------------------------------------------------------------------------------------\n// The dashboard component.\n//--------------------------------------------------------------------------------------------------\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst kaiju_1 = require(\"kaiju\");\n// import { update } from 'immupdate'\nconst route_1 = require(\"../stores/route\");\nconst route_2 = require(\"../stores/route\");\nfunction default_1() {\n    return kaiju_1.Component({\n        name: 'dashboard',\n        initState,\n        connect,\n        render\n    });\n}\nexports.default = default_1;\nconst showReader = kaiju_1.Message('showReader');\nfunction initState() {\n    return {};\n}\nfunction connect({ on }) {\n    on(showReader, () => route_2.default.send(route_1.navigate(route_1.Route.Reader)));\n}\nfunction render({ msg }) {\n    return kaiju_1.h(\"dashboard\", {}, [\n        kaiju_1.h(\"h1\", \"Dashboard\"),\n        kaiju_1.h(\"a\", { on: { click: () => msg.send(showReader()) } }, [\"Reader\"])\n    ]);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/dashboard.ts","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//--------------------------------------------------------------------------------------------------\n// The import PGN modal dialog.\n//--------------------------------------------------------------------------------------------------\nconst kaiju_1 = require(\"kaiju\");\nconst immupdate_1 = require(\"immupdate\");\nconst importfile_1 = require(\"../server/importfile\");\nconst path = require(\"path\");\nfunction default_1() {\n    return kaiju_1.Component({\n        name: 'importpgn',\n        props: defaultProps(),\n        initState,\n        connect,\n        render\n    });\n}\nexports.default = default_1;\nfunction defaultProps() {\n    return { remoteStore: importfile_1.factory() };\n}\nfunction initState() {\n    return {\n        showingSelectFileDialog: false,\n        targetDatabase: \"new\",\n        showFileImportProgress: false,\n        remoteState: {\n            activity: \"\",\n            progress: 0,\n            path: undefined\n        },\n    };\n}\nconst showModal = kaiju_1.Message('showModal');\nconst hideFileDialog = kaiju_1.Message('hideFileDialog');\nconst setFileInput = kaiju_1.Message('setFileInput');\nconst showFileDialog = kaiju_1.Message('showFileDialog');\nconst selectFile = kaiju_1.Message('selectFile');\nconst importPgn = kaiju_1.Message('importPgn');\nconst cancelFileImport = kaiju_1.Message('cancelFileImport');\nfunction connect({ on, props }) {\n    on(showModal, (state) => immupdate_1.update(state, { showingSelectFileDialog: true }));\n    on(hideFileDialog, (state) => immupdate_1.update(state, { showingSelectFileDialog: false }));\n    on(importPgn, (state) => {\n        props().remoteStore.store.send(importfile_1.importFile({ path: state.remoteState.path }));\n        // TODO: Unsure why this doesn't reset the progress to zero, should figure it out later.\n        return immupdate_1.update(state, {\n            showingSelectFileDialog: false,\n            showFileImportProgress: true,\n            remoteState: immupdate_1.update(state.remoteState, { activity: \"waiting\", progress: 0 })\n        });\n    });\n    on(cancelFileImport, (state) => immupdate_1.update(state, { showFileImportProgress: false }));\n    on(setFileInput, (state, elm) => immupdate_1.update(state, { fileInput: elm }));\n    on(showFileDialog, (state) => {\n        if (state.fileInput) {\n            state.fileInput.click();\n        }\n    });\n    on(selectFile, (state, elm) => {\n        if (elm.files) {\n            let file = elm.files[0];\n            if (!file)\n                return;\n            return immupdate_1.update(state, { remoteState: immupdate_1.update(state.remoteState, { path: file.path }) });\n        }\n    });\n    on(props().remoteStore.store.state, (state, remoteState) => {\n        return immupdate_1.update(state, { remoteState: remoteState });\n    });\n}\nfunction render({ state, msg }) {\n    let fileDialogClass = \"\";\n    if (state.showingSelectFileDialog) {\n        fileDialogClass = \" .is-active\";\n    }\n    let progressDialogClass = \"\";\n    if (state.showFileImportProgress) {\n        progressDialogClass = \" .is-active\";\n    }\n    let buttonTitle = \"\";\n    if (state.remoteState.path) {\n        buttonTitle = \"Change PGN File: \" + path.basename(state.remoteState.path);\n    }\n    else {\n        buttonTitle = \"Select PGN File\";\n    }\n    return kaiju_1.h(\"import\", {}, [\n        kaiju_1.h(\"button.import.button\", { on: { click: () => msg.send(showModal()) } }, \"+ Import Games\"),\n        kaiju_1.h(\"div.modal\" + fileDialogClass, {}, [\n            kaiju_1.h(\"div.modal-background\"),\n            kaiju_1.h(\"div.modal-card\", {}, [\n                kaiju_1.h(\"header.modal-card-head\", {}, [\n                    kaiju_1.h(\"div.modal-card-title\", \"Import Games\"),\n                    kaiju_1.h(\"button.delete\", { on: { click: () => msg.send(hideFileDialog()) } })\n                ]),\n                kaiju_1.h(\"section.modal-card-body\", {}, [\n                    kaiju_1.h(\"div.form\", {}, [\n                        kaiju_1.h(\"div.field\", [\n                            kaiju_1.h(\"p.control\", [\n                                kaiju_1.h(\"input.file\", {\n                                    attrs: { \"type\": \"file\", \"name\": \"Browse\", \"style\": \"display: none\" },\n                                    on: { change: (evt) => msg.send(selectFile(evt.target)) },\n                                    hook: { insert: (vnode) => {\n                                            msg.send(setFileInput(vnode.elm));\n                                        } }\n                                }),\n                                kaiju_1.h(\"button.button\", { on: { click: () => msg.send(showFileDialog()) } }, buttonTitle)\n                            ])\n                        ]),\n                        kaiju_1.h(\"div.field\", [\n                            kaiju_1.h(\"p.control\", [\n                                kaiju_1.h(\"label.label\", \"Import into:\"),\n                                kaiju_1.h(\"span.select\", [\n                                    kaiju_1.h(\"select\", { attrs: { name: \"database\" } }, [\n                                        kaiju_1.h(\"option\", \"New Database\")\n                                    ]),\n                                ]),\n                            ]),\n                        ])\n                    ])\n                ]),\n                kaiju_1.h(\"footer.modal-card-foot\", {}, [\n                    kaiju_1.h(\"a.button is-success\", { on: { click: () => msg.send(importPgn()) } }, \"Import\"),\n                    kaiju_1.h(\"a.button\", { on: { click: () => msg.send(hideFileDialog()) } }, \"Cancel\")\n                ]),\n            ]),\n        ]),\n        kaiju_1.h(\"div.modal\" + progressDialogClass, {}, [\n            kaiju_1.h(\"div.modal-background\"),\n            kaiju_1.h(\"div.modal-card\", {}, [\n                kaiju_1.h(\"header.modal-card-head\", {}, [\n                    kaiju_1.h(\"div.modal-card-title\", \"Importing...\"),\n                    kaiju_1.h(\"button.delete\", { on: { click: () => msg.send(cancelFileImport()) } })\n                ]),\n                kaiju_1.h(\"section.modal-card-body\", {}, [\n                    kaiju_1.h(\"progress.progress.is-large\", { attrs: { \"value\": state.remoteState.progress, \"max\": 100 } }, state.remoteState.progress + \"%\")\n                ]),\n                kaiju_1.h(\"footer.modal-card-foot\", {}, [\n                    kaiju_1.h(\"a.button\", { on: { click: () => msg.send(cancelFileImport()) } }, \"Cancel\")\n                ]),\n            ]),\n        ])\n    ]);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/importpgn.ts","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst kaiju_1 = require(\"kaiju\");\nconst messages_1 = require(\"./messages\");\nexports.importFile = kaiju_1.Message('import::importFile');\nexports.updateProgress = kaiju_1.Message('import::updateProgress');\nfunction factory() {\n    let initialState = { path: undefined, activity: \"waiting\", progress: 0 };\n    let remote = new messages_1.Remote(initialState, [new messages_1.OutgoingMessage('import::importFile', exports.importFile)], [new messages_1.IncomingMessage('import::updateProgress', exports.updateProgress)]);\n    return remote;\n}\nexports.factory = factory;\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/importfile.ts","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/path-browserify/index.js\n// module id = 66\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/process/browser.js\n// module id = 67\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst kaiju_1 = require(\"kaiju\");\nfunction button() {\n    return kaiju_1.Component({ name: 'logo', initState, connect, render });\n}\nexports.default = button;\nfunction initState() { return {}; }\nfunction connect() { }\nfunction render() {\n    return kaiju_1.h(\"h2.delila.title.is-3\", {}, [\n        kaiju_1.h(\"c.d1\", \"D\"),\n        kaiju_1.h(\"c.e1\", \"e\"),\n        kaiju_1.h(\"c.l1\", \"l\"),\n        kaiju_1.h(\"c.i1\", \"i\"),\n        kaiju_1.h(\"c.l2\", \"l\"),\n        kaiju_1.h(\"c.a1\", \"a\")\n    ]);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/logo.ts","\"use strict\";\n//--------------------------------------------------------------------------------------------------\n// The reader component\n//--------------------------------------------------------------------------------------------------\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst chessground_1 = require(\"./chessground\");\nconst kaiju_1 = require(\"kaiju\");\n// import { update } from 'immupdate'\nfunction default_1() {\n    return kaiju_1.Component({ name: 'reader', initState, connect, render });\n}\nexports.default = default_1;\nfunction initState() {\n    return {};\n}\nconst click = kaiju_1.Message('click');\nfunction connect({ on }) {\n    on(click, () => { console.log(\"click\"); });\n}\nfunction render({}) {\n    // TODO: make the styling configurable\n    return kaiju_1.h('reader.blue.merida', { events: { click } }, chessground_1.default());\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/reader.ts","\"use strict\";\n//--------------------------------------------------------------------------------------------------\n// The chessground component\n//--------------------------------------------------------------------------------------------------\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst chessground_1 = require(\"chessground\");\nconst kaiju_1 = require(\"kaiju\");\n// import { update } from 'immupdate'\nfunction default_1() {\n    return kaiju_1.Component({ name: 'chessground', initState, connect, render });\n}\nexports.default = default_1;\nfunction initState() {\n    return { chessground: undefined };\n}\nconst inserted = kaiju_1.Message('inserted');\nconst destroyed = kaiju_1.Message('destroyed');\nfunction connect({ on }) {\n    on(inserted, (state, elm) => {\n        state.chessground = chessground_1.Chessground(elm, {});\n    });\n}\nfunction render({ msg }) {\n    return kaiju_1.h('cgcontainer', { hook: {\n            insert: node => msg.send(inserted(node.elm)),\n            destroy: () => msg.send(destroyed())\n        } });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/chessground.ts","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar api_1 = require(\"./api\");\nvar config_1 = require(\"./config\");\nvar state_1 = require(\"./state\");\nvar wrap_1 = require(\"./wrap\");\nvar events = require(\"./events\");\nvar render_1 = require(\"./render\");\nvar svg = require(\"./svg\");\nvar util = require(\"./util\");\nfunction Chessground(element, config) {\n    var state = state_1.defaults();\n    config_1.configure(state, config || {});\n    function redrawAll() {\n        var prevUnbind = state.dom && state.dom.unbind;\n        element.classList.add('cg-board-wrap');\n        var bounds = util.memo(function () { return element.getBoundingClientRect(); });\n        var relative = state.viewOnly && !state.drawable.visible;\n        var elements = wrap_1.default(element, state, relative ? undefined : bounds());\n        var redrawNow = function (skipSvg) {\n            render_1.default(state);\n            if (!skipSvg && elements.svg)\n                svg.renderSvg(state, elements.svg);\n        };\n        state.dom = {\n            elements: elements,\n            bounds: bounds,\n            redraw: debounceRedraw(redrawNow),\n            redrawNow: redrawNow,\n            unbind: prevUnbind,\n            relative: relative\n        };\n        state.drawable.prevSvgHash = '';\n        redrawNow(false);\n        events.bindBoard(state);\n        if (!prevUnbind)\n            state.dom.unbind = events.bindDocument(state, redrawAll);\n    }\n    redrawAll();\n    var api = api_1.start(state, redrawAll);\n    return api;\n}\nexports.Chessground = Chessground;\n;\nfunction debounceRedraw(redrawNow) {\n    var redrawing = false;\n    return function () {\n        if (redrawing)\n            return;\n        redrawing = true;\n        util.raf(function () {\n            redrawNow();\n            redrawing = false;\n        });\n    };\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/chessground.js\n// module id = 71\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar board = require(\"./board\");\nvar fen_1 = require(\"./fen\");\nvar config_1 = require(\"./config\");\nvar anim_1 = require(\"./anim\");\nvar drag_1 = require(\"./drag\");\nvar explosion_1 = require(\"./explosion\");\nfunction start(state, redrawAll) {\n    function toggleOrientation() {\n        board.toggleOrientation(state);\n        redrawAll();\n    }\n    ;\n    return {\n        set: function (config) {\n            if (config.orientation && config.orientation !== state.orientation)\n                toggleOrientation();\n            (config.fen ? anim_1.anim : anim_1.render)(function (state) { return config_1.configure(state, config); }, state);\n        },\n        state: state,\n        getFen: function () { return fen_1.write(state.pieces); },\n        toggleOrientation: toggleOrientation,\n        setPieces: function (pieces) {\n            anim_1.anim(function (state) { return board.setPieces(state, pieces); }, state);\n        },\n        selectSquare: function (key, force) {\n            if (key)\n                anim_1.anim(function (state) { return board.selectSquare(state, key, force); }, state);\n            else if (state.selected) {\n                board.unselect(state);\n                state.dom.redraw();\n            }\n        },\n        move: function (orig, dest) {\n            anim_1.anim(function (state) { return board.baseMove(state, orig, dest); }, state);\n        },\n        newPiece: function (piece, key) {\n            anim_1.anim(function (state) { return board.baseNewPiece(state, piece, key); }, state);\n        },\n        playPremove: function () {\n            if (state.premovable.current) {\n                if (anim_1.anim(board.playPremove, state))\n                    return true;\n                state.dom.redraw();\n            }\n            return false;\n        },\n        playPredrop: function (validate) {\n            if (state.predroppable.current) {\n                var result = board.playPredrop(state, validate);\n                state.dom.redraw();\n                return result;\n            }\n            return false;\n        },\n        cancelPremove: function () {\n            anim_1.render(board.unsetPremove, state);\n        },\n        cancelPredrop: function () {\n            anim_1.render(board.unsetPredrop, state);\n        },\n        cancelMove: function () {\n            anim_1.render(function (state) { board.cancelMove(state); drag_1.cancel(state); }, state);\n        },\n        stop: function () {\n            anim_1.render(function (state) { board.stop(state); drag_1.cancel(state); }, state);\n        },\n        explode: function (keys) {\n            explosion_1.default(state, keys);\n        },\n        setAutoShapes: function (shapes) {\n            anim_1.render(function (state) { return state.drawable.autoShapes = shapes; }, state);\n        },\n        setShapes: function (shapes) {\n            anim_1.render(function (state) { return state.drawable.shapes = shapes; }, state);\n        },\n        getKeyAtDomPos: function (pos) {\n            return board.getKeyAtDomPos(pos, state.orientation === 'white', state.dom.bounds());\n        },\n        redrawAll: redrawAll,\n        dragNewPiece: function (piece, event, force) {\n            drag_1.dragNewPiece(state, piece, event, force);\n        },\n        destroy: function () {\n            board.stop(state);\n            state.dom.unbind && state.dom.unbind();\n            state.dom.destroyed = true;\n        }\n    };\n}\nexports.start = start;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/api.js\n// module id = 72\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util = require(\"./util\");\nfunction diff(a, b) {\n    return Math.abs(a - b);\n}\nfunction pawn(color) {\n    return function (x1, y1, x2, y2) { return diff(x1, x2) < 2 && (color === 'white' ? (y2 === y1 + 1 || (y1 <= 2 && y2 === (y1 + 2) && x1 === x2)) : (y2 === y1 - 1 || (y1 >= 7 && y2 === (y1 - 2) && x1 === x2))); };\n}\nvar knight = function (x1, y1, x2, y2) {\n    var xd = diff(x1, x2);\n    var yd = diff(y1, y2);\n    return (xd === 1 && yd === 2) || (xd === 2 && yd === 1);\n};\nvar bishop = function (x1, y1, x2, y2) {\n    return diff(x1, x2) === diff(y1, y2);\n};\nvar rook = function (x1, y1, x2, y2) {\n    return x1 === x2 || y1 === y2;\n};\nvar queen = function (x1, y1, x2, y2) {\n    return bishop(x1, y1, x2, y2) || rook(x1, y1, x2, y2);\n};\nfunction king(color, rookFiles, canCastle) {\n    return function (x1, y1, x2, y2) { return (diff(x1, x2) < 2 && diff(y1, y2) < 2) || (canCastle && y1 === y2 && y1 === (color === 'white' ? 1 : 8) && ((x1 === 5 && (x2 === 3 || x2 === 7)) || util.containsX(rookFiles, x2))); };\n}\nfunction rookFilesOf(pieces, color) {\n    var piece;\n    return Object.keys(pieces).filter(function (key) {\n        piece = pieces[key];\n        return piece && piece.color === color && piece.role === 'rook';\n    }).map(function (key) { return util.key2pos(key)[0]; });\n}\nfunction premove(pieces, key, canCastle) {\n    var piece = pieces[key], pos = util.key2pos(key);\n    var mobility;\n    switch (piece.role) {\n        case 'pawn':\n            mobility = pawn(piece.color);\n            break;\n        case 'knight':\n            mobility = knight;\n            break;\n        case 'bishop':\n            mobility = bishop;\n            break;\n        case 'rook':\n            mobility = rook;\n            break;\n        case 'queen':\n            mobility = queen;\n            break;\n        case 'king':\n            mobility = king(piece.color, rookFilesOf(pieces, piece.color), canCastle);\n            break;\n    }\n    return util.allKeys.map(util.key2pos).filter(function (pos2) {\n        return (pos[0] !== pos2[0] || pos[1] !== pos2[1]) && mobility(pos[0], pos[1], pos2[0], pos2[1]);\n    }).map(util.pos2key);\n}\nexports.default = premove;\n;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/premove.js\n// module id = 73\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction explosion(state, keys) {\n    state.exploding = {\n        stage: 1,\n        keys: keys\n    };\n    state.dom.redraw();\n    setTimeout(function () {\n        setStage(state, 2);\n        setTimeout(function () { return setStage(state, undefined); }, 120);\n    }, 120);\n}\nexports.default = explosion;\nfunction setStage(state, stage) {\n    if (state.exploding) {\n        if (stage)\n            state.exploding.stage = stage;\n        else\n            state.exploding = undefined;\n        state.dom.redraw();\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/explosion.js\n// module id = 74\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar fen = require(\"./fen\");\nvar util_1 = require(\"./util\");\nfunction defaults() {\n    return {\n        pieces: fen.read(fen.initial),\n        orientation: 'white',\n        turnColor: 'white',\n        coordinates: true,\n        autoCastle: true,\n        viewOnly: false,\n        disableContextMenu: false,\n        resizable: true,\n        addPieceZIndex: false,\n        pieceKey: false,\n        highlight: {\n            lastMove: true,\n            check: true\n        },\n        animation: {\n            enabled: true,\n            duration: 200\n        },\n        movable: {\n            free: true,\n            color: 'both',\n            showDests: true,\n            events: {},\n            rookCastle: true\n        },\n        premovable: {\n            enabled: true,\n            showDests: true,\n            castle: true,\n            events: {}\n        },\n        predroppable: {\n            enabled: false,\n            events: {}\n        },\n        draggable: {\n            enabled: true,\n            distance: 3,\n            autoDistance: true,\n            centerPiece: true,\n            showGhost: true,\n            deleteOnDropOff: false\n        },\n        selectable: {\n            enabled: true\n        },\n        stats: {\n            dragged: !('ontouchstart' in window)\n        },\n        events: {},\n        drawable: {\n            enabled: true,\n            visible: true,\n            eraseOnClick: true,\n            shapes: [],\n            autoShapes: [],\n            brushes: {\n                green: { key: 'g', color: '#15781B', opacity: 1, lineWidth: 10 },\n                red: { key: 'r', color: '#882020', opacity: 1, lineWidth: 10 },\n                blue: { key: 'b', color: '#003088', opacity: 1, lineWidth: 10 },\n                yellow: { key: 'y', color: '#e68f00', opacity: 1, lineWidth: 10 },\n                paleBlue: { key: 'pb', color: '#003088', opacity: 0.4, lineWidth: 15 },\n                paleGreen: { key: 'pg', color: '#15781B', opacity: 0.4, lineWidth: 15 },\n                paleRed: { key: 'pr', color: '#882020', opacity: 0.4, lineWidth: 15 },\n                paleGrey: { key: 'pgr', color: '#4a4a4a', opacity: 0.35, lineWidth: 15 }\n            },\n            pieces: {\n                baseUrl: 'https://lichess1.org/assets/piece/cburnett/'\n            },\n            prevSvgHash: ''\n        },\n        hold: util_1.timer()\n    };\n}\nexports.defaults = defaults;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/state.js\n// module id = 75\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nvar types_1 = require(\"./types\");\nvar svg_1 = require(\"./svg\");\nfunction wrap(element, s, bounds) {\n    element.innerHTML = '';\n    element.classList.add('cg-board-wrap');\n    util_1.colors.forEach(function (c) {\n        element.classList.toggle('orientation-' + c, s.orientation === c);\n    });\n    element.classList.toggle('manipulable', !s.viewOnly);\n    var board = util_1.createEl('div', 'cg-board');\n    element.appendChild(board);\n    var svg;\n    if (s.drawable.visible && bounds) {\n        svg = svg_1.createElement('svg');\n        svg.appendChild(svg_1.createElement('defs'));\n        element.appendChild(svg);\n    }\n    if (s.coordinates) {\n        var orientClass = s.orientation === 'black' ? ' black' : '';\n        element.appendChild(renderCoords(types_1.ranks, 'ranks' + orientClass));\n        element.appendChild(renderCoords(types_1.files, 'files' + orientClass));\n    }\n    var over;\n    if (bounds && (s.movable.showDests || s.premovable.showDests)) {\n        over = util_1.createEl('div', 'over');\n        util_1.translateAway(over);\n        over.style.width = (bounds.width / 8) + 'px';\n        over.style.height = (bounds.height / 8) + 'px';\n        element.appendChild(over);\n    }\n    var ghost;\n    if (bounds && s.draggable.showGhost) {\n        ghost = util_1.createEl('piece', 'ghost');\n        util_1.translateAway(ghost);\n        element.appendChild(ghost);\n    }\n    return {\n        board: board,\n        over: over,\n        ghost: ghost,\n        svg: svg\n    };\n}\nexports.default = wrap;\nfunction renderCoords(elems, className) {\n    var el = util_1.createEl('coords', className);\n    var f;\n    for (var i in elems) {\n        f = util_1.createEl('coord');\n        f.textContent = elems[i];\n        el.appendChild(f);\n    }\n    return el;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/wrap.js\n// module id = 76\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar drag = require(\"./drag\");\nvar draw = require(\"./draw\");\nvar util_1 = require(\"./util\");\nfunction bindBoard(s) {\n    if (s.viewOnly)\n        return;\n    var boardEl = s.dom.elements.board, onStart = startDragOrDraw(s);\n    boardEl.addEventListener('touchstart', onStart);\n    boardEl.addEventListener('mousedown', onStart);\n    if (s.disableContextMenu || s.drawable.enabled) {\n        boardEl.addEventListener('contextmenu', function (e) { return e.preventDefault(); });\n    }\n}\nexports.bindBoard = bindBoard;\nfunction bindDocument(s, redrawAll) {\n    var unbinds = [];\n    if (!s.dom.relative && s.resizable) {\n        var onResize = function () {\n            s.dom.bounds.clear();\n            util_1.raf(redrawAll);\n        };\n        unbinds.push(unbindable(document.body, 'chessground.resize', onResize));\n    }\n    if (!s.viewOnly) {\n        var onmove_1 = dragOrDraw(s, drag.move, draw.move);\n        var onend_1 = dragOrDraw(s, drag.end, draw.end);\n        ['touchmove', 'mousemove'].forEach(function (ev) { return unbinds.push(unbindable(document, ev, onmove_1)); });\n        ['touchend', 'mouseup'].forEach(function (ev) { return unbinds.push(unbindable(document, ev, onend_1)); });\n        var onScroll = function () { return s.dom.bounds.clear(); };\n        unbinds.push(unbindable(window, 'scroll', onScroll, { passive: true }));\n        unbinds.push(unbindable(window, 'resize', onScroll, { passive: true }));\n    }\n    return function () { return unbinds.forEach(function (f) { return f(); }); };\n}\nexports.bindDocument = bindDocument;\nfunction unbindable(el, eventName, callback, options) {\n    el.addEventListener(eventName, callback, options);\n    return function () { return el.removeEventListener(eventName, callback); };\n}\nfunction startDragOrDraw(s) {\n    return function (e) {\n        if (s.draggable.current)\n            drag.cancel(s);\n        else if (s.drawable.current)\n            draw.cancel(s);\n        else if (e.shiftKey || util_1.isRightButton(e)) {\n            if (s.drawable.enabled)\n                draw.start(s, e);\n        }\n        else if (!s.viewOnly)\n            drag.start(s, e);\n    };\n}\nfunction dragOrDraw(s, withDrag, withDraw) {\n    return function (e) {\n        if (e.shiftKey || util_1.isRightButton(e)) {\n            if (s.drawable.enabled)\n                withDraw(s, e);\n        }\n        else if (!s.viewOnly)\n            withDrag(s, e);\n    };\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/events.js\n// module id = 77\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nvar util = require(\"./util\");\nfunction render(s) {\n    var asWhite = s.orientation === 'white', posToTranslate = s.dom.relative ? util.posToTranslateRel : util.posToTranslateAbs(s.dom.bounds()), translate = s.dom.relative ? util.translateRel : util.translateAbs, boardEl = s.dom.elements.board, pieces = s.pieces, curAnim = s.animation.current, anims = curAnim ? curAnim.plan.anims : {}, fadings = curAnim ? curAnim.plan.fadings : {}, curDrag = s.draggable.current, squares = computeSquareClasses(s), samePieces = {}, sameSquares = {}, movedPieces = {}, movedSquares = {}, piecesKeys = Object.keys(pieces);\n    var k, p, el, pieceAtKey, elPieceName, anim, fading, pMvdset, pMvd, sMvdset, sMvd;\n    el = boardEl.firstChild;\n    while (el) {\n        k = el.cgKey;\n        if (isPieceNode(el)) {\n            pieceAtKey = pieces[k];\n            anim = anims[k];\n            fading = fadings[k];\n            elPieceName = el.cgPiece;\n            if (el.cgDragging && (!curDrag || curDrag.orig !== k)) {\n                el.classList.remove('dragging');\n                translate(el, posToTranslate(util_1.key2pos(k), asWhite));\n                el.cgDragging = false;\n            }\n            if (!fading && el.cgFading) {\n                el.cgFading = false;\n                el.classList.remove('fading');\n            }\n            if (pieceAtKey) {\n                if (anim && el.cgAnimating && elPieceName === pieceNameOf(pieceAtKey)) {\n                    var pos = util_1.key2pos(k);\n                    pos[0] += anim[2];\n                    pos[1] += anim[3];\n                    el.classList.add('anim');\n                    translate(el, posToTranslate(pos, asWhite));\n                }\n                else if (el.cgAnimating) {\n                    el.cgAnimating = false;\n                    el.classList.remove('anim');\n                    translate(el, posToTranslate(util_1.key2pos(k), asWhite));\n                    if (s.addPieceZIndex)\n                        el.style.zIndex = posZIndex(util_1.key2pos(k), asWhite);\n                }\n                if (elPieceName === pieceNameOf(pieceAtKey) && (!fading || !el.cgFading)) {\n                    samePieces[k] = true;\n                }\n                else {\n                    if (fading && elPieceName === pieceNameOf(fading)) {\n                        el.classList.add('fading');\n                        el.cgFading = true;\n                    }\n                    else {\n                        if (movedPieces[elPieceName])\n                            movedPieces[elPieceName].push(el);\n                        else\n                            movedPieces[elPieceName] = [el];\n                    }\n                }\n            }\n            else {\n                if (movedPieces[elPieceName])\n                    movedPieces[elPieceName].push(el);\n                else\n                    movedPieces[elPieceName] = [el];\n            }\n        }\n        else if (isSquareNode(el)) {\n            var cn = el.className;\n            if (squares[k] === cn)\n                sameSquares[k] = true;\n            else if (movedSquares[cn])\n                movedSquares[cn].push(el);\n            else\n                movedSquares[cn] = [el];\n        }\n        el = el.nextSibling;\n    }\n    for (var sk in squares) {\n        if (!sameSquares[sk]) {\n            sMvdset = movedSquares[squares[sk]];\n            sMvd = sMvdset && sMvdset.pop();\n            var translation = posToTranslate(util_1.key2pos(sk), asWhite);\n            if (sMvd) {\n                sMvd.cgKey = sk;\n                translate(sMvd, translation);\n            }\n            else {\n                var squareNode = util_1.createEl('square', squares[sk]);\n                squareNode.cgKey = sk;\n                translate(squareNode, translation);\n                boardEl.insertBefore(squareNode, boardEl.firstChild);\n            }\n        }\n    }\n    for (var j in piecesKeys) {\n        k = piecesKeys[j];\n        p = pieces[k];\n        anim = anims[k];\n        if (!samePieces[k]) {\n            pMvdset = movedPieces[pieceNameOf(p)];\n            pMvd = pMvdset && pMvdset.pop();\n            if (pMvd) {\n                pMvd.cgKey = k;\n                if (pMvd.cgFading) {\n                    pMvd.classList.remove('fading');\n                    pMvd.cgFading = false;\n                }\n                var pos = util_1.key2pos(k);\n                if (s.addPieceZIndex)\n                    pMvd.style.zIndex = posZIndex(pos, asWhite);\n                if (anim) {\n                    pMvd.cgAnimating = true;\n                    pMvd.classList.add('anim');\n                    pos[0] += anim[2];\n                    pos[1] += anim[3];\n                }\n                translate(pMvd, posToTranslate(pos, asWhite));\n            }\n            else {\n                var pieceName = pieceNameOf(p), pieceNode = util_1.createEl('piece', pieceName), pos = util_1.key2pos(k);\n                pieceNode.cgPiece = pieceName;\n                pieceNode.cgKey = k;\n                if (anim) {\n                    pieceNode.cgAnimating = true;\n                    pos[0] += anim[2];\n                    pos[1] += anim[3];\n                }\n                translate(pieceNode, posToTranslate(pos, asWhite));\n                if (s.addPieceZIndex)\n                    pieceNode.style.zIndex = posZIndex(pos, asWhite);\n                boardEl.appendChild(pieceNode);\n            }\n        }\n    }\n    for (var i in movedPieces)\n        removeNodes(s, movedPieces[i]);\n    for (var i in movedSquares)\n        removeNodes(s, movedSquares[i]);\n}\nexports.default = render;\nfunction isPieceNode(el) {\n    return el.tagName === 'PIECE';\n}\nfunction isSquareNode(el) {\n    return el.tagName === 'SQUARE';\n}\nfunction removeNodes(s, nodes) {\n    for (var i in nodes)\n        s.dom.elements.board.removeChild(nodes[i]);\n}\nfunction posZIndex(pos, asWhite) {\n    var z = 2 + (pos[1] - 1) * 8 + (8 - pos[0]);\n    if (asWhite)\n        z = 67 - z;\n    return z + '';\n}\nfunction pieceNameOf(piece) {\n    return piece.color + \" \" + piece.role;\n}\nfunction computeSquareClasses(s) {\n    var squares = {};\n    var i, k;\n    if (s.lastMove && s.highlight.lastMove)\n        for (i in s.lastMove) {\n            addSquare(squares, s.lastMove[i], 'last-move');\n        }\n    if (s.check && s.highlight.check)\n        addSquare(squares, s.check, 'check');\n    if (s.selected) {\n        addSquare(squares, s.selected, 'selected');\n        if (s.movable.showDests) {\n            var dests = s.movable.dests && s.movable.dests[s.selected];\n            if (dests)\n                for (i in dests) {\n                    k = dests[i];\n                    addSquare(squares, k, 'move-dest' + (s.pieces[k] ? ' oc' : ''));\n                }\n            var pDests = s.premovable.dests;\n            if (pDests)\n                for (i in pDests) {\n                    k = pDests[i];\n                    addSquare(squares, k, 'premove-dest' + (s.pieces[k] ? ' oc' : ''));\n                }\n        }\n    }\n    var premove = s.premovable.current;\n    if (premove)\n        for (i in premove)\n            addSquare(squares, premove[i], 'current-premove');\n    else if (s.predroppable.current)\n        addSquare(squares, s.predroppable.current.key, 'current-premove');\n    var o = s.exploding;\n    if (o)\n        for (i in o.keys)\n            addSquare(squares, o.keys[i], 'exploding' + o.stage);\n    return squares;\n}\nfunction addSquare(squares, key, klass) {\n    if (squares[key])\n        squares[key] += ' ' + klass;\n    else\n        squares[key] = klass;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/chessground/render.js\n// module id = 78\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst kaiju_1 = require(\"kaiju\");\nconst immupdate_1 = require(\"immupdate\");\nconst observable_1 = require(\"kaiju/observable\");\nconst connection_1 = require(\"./connection\");\nconst Connected = { type: 'Connected' };\nconst Retrying = { type: 'Retrying' };\nconst WaitingToRetry = { type: 'WaitingToRetry' };\nfunction default_1(props) {\n    return kaiju_1.Component({ name: 'server', props, initState, connect, render });\n}\nexports.default = default_1;\nfunction initState(initProps) {\n    return { url: initProps.url, state: WaitingToRetry, timeout: 1, connection: connection_1.Connection.getInstance(), timeToRetry: 0 };\n}\nconst click = kaiju_1.Message('click');\nconst disconnected = kaiju_1.Message('disconnected');\nconst connected = kaiju_1.Message('connected');\nconst tryReconnect = kaiju_1.Message('tryReconnect');\nfunction connect({ on, msg }) {\n    // TODO: Evaluate the effect of this on the battery life.\n    const polling = observable_1.Observable.interval(1000);\n    on(click, () => msg.send(tryReconnect()));\n    on(disconnected, state => {\n        let timeout = Math.min(state.timeout * 2, 120);\n        return immupdate_1.update(state, { state: WaitingToRetry, timeout: timeout, timeToRetry: timeout });\n    });\n    on(polling, state => {\n        if (state.state != WaitingToRetry)\n            return state;\n        let timeToRetry = state.timeToRetry - 1;\n        if (timeToRetry <= 0)\n            msg.send(tryReconnect());\n        return immupdate_1.update(state, { timeToRetry: timeToRetry });\n    });\n    on(tryReconnect, state => {\n        state.connection.connect(state.url);\n        state.connection.onopen = () => msg.send(connected());\n        state.connection.onclose = () => msg.send(disconnected());\n        return immupdate_1.update(state, { state: Retrying });\n    });\n    on(connected, state => immupdate_1.update(state, { state: Connected, timeout: 1, timeToRetry: 1 }));\n}\nfunction render({ state }) {\n    let node = kaiju_1.h(\"span\");\n    if (state.state == Retrying) {\n        node = kaiju_1.h(\"span\", \"Trying to connect\");\n    }\n    else if (state.state == WaitingToRetry) {\n        node = kaiju_1.h(\"span\", [\n            \"Disconnected - will retry in \" + state.timeToRetry + \"s.\",\n            kaiju_1.h(\"a\", { events: { click } }, [\" (retry now)\"])\n        ]);\n    }\n    else if (state.state == Connected) {\n        node = kaiju_1.h(\"span\", \"Connected\");\n    }\n    return kaiju_1.h('span.level-item', [\n        kaiju_1.h('i.fa.fa-link'),\n        node,\n    ]);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/component.ts","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// The splash screen.\nconst kaiju_1 = require(\"kaiju\");\nconst immupdate_1 = require(\"immupdate\");\nconst initialization_1 = require(\"../server/initialization\");\nconst route_1 = require(\"../stores/route\");\nconst route_2 = require(\"../stores/route\");\nconst version_1 = require(\"../version\");\n//-----------------------------------------------------------------------------------------\nfunction default_1() {\n    return kaiju_1.Component({\n        name: 'splash',\n        props: defaultProps(),\n        initState,\n        connect,\n        render\n    });\n}\nexports.default = default_1;\n//-----------------------------------------------------------------------------------------\nfunction defaultProps() {\n    let remoteStore = initialization_1.factory();\n    console.log(remoteStore.store);\n    remoteStore.store.send(initialization_1.initialize({ version: version_1.default }));\n    return {\n        remoteStore: remoteStore\n    };\n}\nfunction initState() {\n    return {\n        remoteState: {\n            activity: \"...\",\n            progress: 0,\n            version: version_1.default,\n            finished: false\n        },\n    };\n}\n//-----------------------------------------------------------------------------------------\nfunction connect({ on, props }) {\n    on(props().remoteStore.store.state, (state, remoteState) => {\n        let newState = immupdate_1.update(state, { remoteState: remoteState });\n        if (newState.remoteState.finished) {\n            route_1.default.send(route_2.navigate(route_2.Route.Dashboard));\n        }\n        return newState;\n    });\n}\n//-----------------------------------------------------------------------------------------\nfunction render({ state }) {\n    return kaiju_1.h(\"splash\", {}, [\n        kaiju_1.h(\"centre\", [\n            kaiju_1.h(\"h1\", [\n                kaiju_1.h(\"c.d1\", \"D\"),\n                kaiju_1.h(\"c.e1\", \"e\"),\n                kaiju_1.h(\"c.l1\", \"l\"),\n                kaiju_1.h(\"c.i1\", \"i\"),\n                kaiju_1.h(\"c.l2\", \"l\"),\n                kaiju_1.h(\"c.a1\", \"a\"),\n            ]),\n            kaiju_1.h(\"activity\", state.remoteState.activity),\n        ]),\n    ]);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/splash.ts","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst kaiju_1 = require(\"kaiju\");\nconst messages_1 = require(\"./messages\");\nconst version_1 = require(\"../version\");\nexports.initialize = kaiju_1.Message('initialize::initialize');\nexports.updateProgress = kaiju_1.Message('initialize::updateProgress');\nexports.finished = kaiju_1.Message('initialize::finished');\nfunction factory() {\n    let initialState = { version: version_1.default, activity: \"Connecting\", progress: 0, finished: false };\n    let remote = new messages_1.Remote(initialState, [new messages_1.OutgoingMessage('initialize::initialize', exports.initialize)], [\n        new messages_1.IncomingMessage('initialize::updateProgress', exports.updateProgress),\n        new messages_1.IncomingMessage('initialize::finished', exports.finished)\n    ]);\n    return remote;\n}\nexports.factory = factory;\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/initialization.ts"],"sourceRoot":""}